/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-localities",function(a){a.namespace("Squarespace");
a.Squarespace.Localities={COUNTRY_OPTIONS:{"":{title:"Not Specified",empty:true},US:{title:"United States"},CA:{title:"Canada"},AF:{title:"Afghanistan"},AL:{title:"Albania"},DZ:{title:"Algeria"},AS:{title:"American Samoa"},AD:{title:"Andorra"},AO:{title:"Angola"},AI:{title:"Anguilla"},AQ:{title:"Antarctica"},AG:{title:"Antigua and Barbuda"},AR:{title:"Argentina"},AM:{title:"Armenia"},AW:{title:"Aruba"},AU:{title:"Australia"},AT:{title:"Austria"},AZ:{title:"Azerbaijan"},BS:{title:"Bahamas"},BH:{title:"Bahrain"},BD:{title:"Bangladesh"},BB:{title:"Barbados"},BY:{title:"Belarus"},BE:{title:"Belgium"},BZ:{title:"Belize"},BJ:{title:"Benin"},BM:{title:"Bermuda"},BT:{title:"Bhutan"},BO:{title:"Bolivia"},BA:{title:"Bosnia and Herzegovina"},BW:{title:"Botswana"},BV:{title:"Bouvet Island"},BR:{title:"Brazil"},IO:{title:"British Indian Ocean Territory"},BN:{title:"Brunei Darussalam"},BG:{title:"Bulgaria"},BF:{title:"Burkina Faso"},BI:{title:"Burundi"},KH:{title:"Cambodia"},CM:{title:"Cameroon"},CV:{title:"Cape Verde"},KY:{title:"Cayman Islands"},CF:{title:"Central African Republic"},TD:{title:"Chad"},CL:{title:"Chile"},CN:{title:"China"},CX:{title:"Christmas Island"},CC:{title:"Cocos (Keeling) Islands"},CO:{title:"Colombia"},KM:{title:"Comoros"},CG:{title:"Congo"},CK:{title:"Cook Islands"},CR:{title:"Costa Rica"},HR:{title:"Croatia (Hrvatska)"},CU:{title:"Cuba"},CY:{title:"Cyprus"},CZ:{title:"Czech Republic"},CS:{title:"Czechoslovakia (former)"},DK:{title:"Denmark"},DJ:{title:"Djibouti"},DM:{title:"Dominica"},DO:{title:"Dominican Republic"},TP:{title:"East Timor"},EC:{title:"Ecuador"},EG:{title:"Egypt"},SV:{title:"El Salvador"},GQ:{title:"Equatorial Guinea"},ER:{title:"Eritrea"},EE:{title:"Estonia"},ET:{title:"Ethiopia"},FK:{title:"Falkland Islands (Malvinas)"},FO:{title:"Faroe Islands"},FJ:{title:"Fiji"},FI:{title:"Finland"},FR:{title:"France"},FX:{title:"France, Metropolitan"},GF:{title:"French Guiana"},PF:{title:"French Polynesia"},TF:{title:"French Southern Territories"},GA:{title:"Gabon"},GM:{title:"Gambia"},GE:{title:"Georgia"},DE:{title:"Germany"},GH:{title:"Ghana"},GI:{title:"Gibraltar"},GB:{title:"Great Britain (UK)"},GR:{title:"Greece"},GL:{title:"Greenland"},GD:{title:"Grenada"},GP:{title:"Guadeloupe"},GU:{title:"Guam"},GT:{title:"Guatemala"},GN:{title:"Guinea"},GW:{title:"Guinea-Bissau"},GY:{title:"Guyana"},HT:{title:"Haiti"},HM:{title:"Heard and McDonald Islands"},HN:{title:"Honduras"},HK:{title:"Hong Kong"},HU:{title:"Hungary"},IS:{title:"Iceland"},IN:{title:"India"},ID:{title:"Indonesia"},IR:{title:"Iran"},IQ:{title:"Iraq"},IE:{title:"Ireland"},IL:{title:"Israel"},IT:{title:"Italy"},JM:{title:"Jamaica"},JP:{title:"Japan"},JO:{title:"Jordan"},KZ:{title:"Kazakhstan"},KE:{title:"Kenya"},KI:{title:"Kiribati"},KP:{title:"Korea (North)"},KR:{title:"Korea (South)"},KW:{title:"Kuwait"},KG:{title:"Kyrgyzstan"},LA:{title:"Laos"},LV:{title:"Latvia"},LB:{title:"Lebanon"},LS:{title:"Lesotho"},LR:{title:"Liberia"},LY:{title:"Libya"},LI:{title:"Liechtenstein"},LT:{title:"Lithuania"},LU:{title:"Luxembourg"},MO:{title:"Macau"},MK:{title:"Macedonia"},MG:{title:"Madagascar"},MW:{title:"Malawi"},MY:{title:"Malaysia"},MV:{title:"Maldives"},ML:{title:"Mali"},MT:{title:"Malta"},MH:{title:"Marshall Islands"},MQ:{title:"Martinique"},MR:{title:"Mauritania"},MU:{title:"Mauritius"},YT:{title:"Mayotte"},MX:{title:"Mexico"},FM:{title:"Micronesia"},MD:{title:"Moldova"},MC:{title:"Monaco"},MN:{title:"Mongolia"},ME:{title:"Montenegro"},MS:{title:"Montserrat"},MA:{title:"Morocco"},MZ:{title:"Mozambique"},MM:{title:"Myanmar"},NA:{title:"Namibia"},NR:{title:"Nauru"},NP:{title:"Nepal"},NL:{title:"Netherlands"},AN:{title:"Netherlands Antilles"},NT:{title:"Neutral Zone"},NC:{title:"New Caledonia"},NZ:{title:"New Zealand (Aotearoa)"},NI:{title:"Nicaragua"},NE:{title:"Niger"},NG:{title:"Nigeria"},NU:{title:"Niue"},NF:{title:"Norfolk Island"},MP:{title:"Northern Mariana Islands"},NO:{title:"Norway"},OM:{title:"Oman"},PK:{title:"Pakistan"},PW:{title:"Palau"},PA:{title:"Panama"},PG:{title:"Papua New Guinea"},PY:{title:"Paraguay"},PE:{title:"Peru"},PH:{title:"Philippines"},PN:{title:"Pitcairn"},PL:{title:"Poland"},PT:{title:"Portugal"},PR:{title:"Puerto Rico"},QA:{title:"Qatar"},RE:{title:"Reunion"},RO:{title:"Romania"},RU:{title:"Russian Federation"},RW:{title:"Rwanda"},GS:{title:"S. Georgia and S. Sandwich Isls."},KN:{title:"Saint Kitts and Nevis"},LC:{title:"Saint Lucia"},VC:{title:"Saint Vincent and the Grenadines"},WS:{title:"Samoa"},SM:{title:"San Marino"},ST:{title:"Sao Tome and Principe"},SA:{title:"Saudi Arabia"},SN:{title:"Senegal"},RS:{title:"Serbia"},SC:{title:"Seychelles"},SL:{title:"Sierra Leone"},SG:{title:"Singapore"},SK:{title:"Slovak Republic"},SI:{title:"Slovenia"},Sb:{title:"Solomon Islands"},SO:{title:"Somalia"},ZA:{title:"South Africa"},ES:{title:"Spain"},LK:{title:"Sri Lanka"},SH:{title:"St. Helena"},PM:{title:"St. Pierre and Miquelon"},SD:{title:"Sudan"},SR:{title:"Suriname"},SJ:{title:"Svalbard and Jan Mayen Islands"},SZ:{title:"Swaziland"},SE:{title:"Sweden"},CH:{title:"Switzerland"},SY:{title:"Syria"},TW:{title:"Taiwan"},TJ:{title:"Tajikistan"},TZ:{title:"Tanzania"},TH:{title:"Thailand"},TG:{title:"Togo"},TK:{title:"Tokelau"},TO:{title:"Tonga"},TT:{title:"Trinidad and Tobago"},TN:{title:"Tunisia"},TR:{title:"Turkey"},TM:{title:"Turkmenistan"},TC:{title:"Turks and Caicos Islands"},TV:{title:"Tuvalu"},UM:{title:"US Minor Outlying Islands"},SU:{title:"USSR (former)"},UG:{title:"Uganda"},UA:{title:"Ukraine"},AE:{title:"United Arab Emirates"},UK:{title:"United Kingdom"},UY:{title:"Uruguay"},UZ:{title:"Uzbekistan"},VU:{title:"Vanuatu"},VA:{title:"Vatican City State (Holy See)"},VE:{title:"Venezuela"},VN:{title:"Viet Nam"},VG:{title:"Virgin Islands (British)"},VI:{title:"Virgin Islands (U.S.)"},WF:{title:"Wallis and Futuna Islands"},EH:{title:"Western Sahara"},YE:{title:"Yemen"},YU:{title:"Yugoslavia"},ZR:{title:"Zaire"},ZM:{title:"Zambia"},ZW:{title:"Zimbabwe"}},STATE_OPTIONS:{"":{title:"Not Specified",empty:true},AL:{title:"Alabama"},AK:{title:"Alaska"},AZ:{title:"Arizona"},AR:{title:"Arkansas"},CA:{title:"California"},CO:{title:"Colorado"},CT:{title:"Connecticut"},DE:{title:"Delaware"},FL:{title:"Florida"},GA:{title:"Georgia"},HI:{title:"Hawaii"},ID:{title:"Idaho"},IL:{title:"Illinois"},IN:{title:"Indiana"},IA:{title:"Iowa"},KS:{title:"Kansas"},KY:{title:"Kentucky"},LA:{title:"Louisiana"},ME:{title:"Maine"},MD:{title:"Maryland"},MA:{title:"Massachusetts"},MI:{title:"Michigan"},MN:{title:"Minnesota"},MS:{title:"Mississippi"},MO:{title:"Missouri"},MT:{title:"Montana"},NE:{title:"Nebraska"},NV:{title:"Nevada"},NH:{title:"New Hampshire"},NJ:{title:"New Jersey"},NM:{title:"New Mexico"},NY:{title:"New York"},NC:{title:"North Carolina"},ND:{title:"North Dakota"},OH:{title:"Ohio"},OK:{title:"Oklahoma"},OR:{title:"Oregon"},PA:{title:"Pennsylvania"},RI:{title:"Rhode Island"},SC:{title:"South Carolina"},SD:{title:"South Dakota"},TN:{title:"Tennessee"},TX:{title:"Texas"},UT:{title:"Utah"},VT:{title:"Vermont"},VA:{title:"Virginia"},WA:{title:"Washington"},DC:{title:"Washington, District of Columbia"},WV:{title:"West Virginia"},WI:{title:"Wisconsin"},WY:{title:"Wyoming"}}}
});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-list",function(b){var a=b.namespace("Squarespace.DialogFields").List=b.Base.create("list",b.Squarespace.DialogField2,[],{initializer:function(d){var e=this.getProperty("DATA_STATES");
var c=d.data;
if(c){this.set("dataState",this.getProperty("DATA_STATES").LOADED);
this._addItems(c)
}else{this.after(this.get("id")+"|dataStateChange",function(f){if(f.newVal===e.LOADED){this._addItems(f.data||this.get("data"))
}},this);
this._loadData()
}},renderUI:function(){a.superclass.renderUI.call(this);
var d=this.get("boundingBox"),c=this.get("strings");
d.one("button.add-item").setContent(c.addButton);
d.one(".list-title").setContent(c.title);
var e=d.one(".list-items .empty");
e.setContent(this.get("strings.emptyText"));
e.show();
var f=d.one(".add-item");
if(this.get("showAddControl")){f.show()
}else{f.hide()
}this._childrenContainer=d.one(".list-items")
},bindUI:function(){a.superclass.bindUI.call(this);
var c=this.get("boundingBox");
c.on(this.get("id")+"|click",function(g){if(g.target.ancestor(".list-items",false)){var h=g.target.ancestor("."+b.Squarespace.DialogField2.CSS_PREFIX,true),d=h.getAttribute("id"),f=this.getFieldById(d);
if(f===null){console.warn(this.name+": Field widget not found, no event will fire.");
return
}this.fire("list-item-click",{originalClickEvent:g,field:f,fieldData:f.get("data")})
}},this);
c.one("button.add-item").on(this.get("id")+"|click",function(){this.fire("add-requested")
},this)
},syncUI:function(){a.superclass.syncUI.call(this);
var c=this.get("data"),d=this.get("boundingBox"),e=d.one(".list-items"),f=e.one(".empty");
this.clearItems();
if(c&&c.length){this._addItems(c);
f.hide()
}else{f.show()
}},getFieldById:function(d){var c=null;
this.some(function(e){if(e.get("boundingBox").get("id")===d){c=e;
return true
}return false
});
return c
},_addItems:function(c){if(!b.Lang.isArray(c)){throw this.name+": List data was not an array"
}b.Array.each(c,function(d){this._addItem(d)
},this)
},_addItem:function(c){if(this.get("rendered")){this.get("boundingBox").one(".list-items .empty").hide()
}var d=this.add({childType:this.get("listItemConstructor"),data:c},0).item(0);
if(!d){throw this.name+": Creating list item failed."
}d.after(this.get("id")+"|dataChange",this._updateItem,this);
d.after("destroy",function(f){this._removeItem(f.target)
},this);
return d
},addItem:function(d){var f=this._addItem(d);
var g=this._parseURLObject(this.get("apiURLs.createURL")),c=g.url,e=g.responseDataProperty;
if(c){b.Data.post({url:c,data:d,success:function(i){if(this.get("mergeResponseData")){var h=e?i[e]:i;
f.set("data",b.merge(d,h),{silent:true})
}},failure:function(h){console.warn(this.name+": Failed to save item, reverting.");
f.destroy()
}},this)
}return f
},removeItem:function(d){var c=this.indexOf(d);
if(c===-1){console.warn(this.name+": That item is not in this list");
return
}d.destroy()
},_removeItem:function(d){var f=d.get("boundingBox");
f.remove();
var e=this._parseURLObject(this.get("apiURLs.deleteURL")).url;
var c=b.bind(function(){this.remove(this.indexOf(d));
if(this.isEmpty()){this.get("contentBox").one(".list-items .empty").show()
}},this);
if(e){b.Data.post({url:e,data:d.get("data"),success:c,failure:function(){f.appendTo(this._childrenContainer)
}},this)
}else{c()
}},clearItems:function(){while(this.size()>0){this._removeItem(this.item(0),false)
}this.get("boundingBox").one(".list-items .empty").show()
},_loadData:function(){var e=this.getProperty("DATA_STATES");
this.set("dataState",e.LOADING);
var f=this.get("apiURLs");
if(!f||!this._parseURLObject(f.readURL).url){this.set("dataState",e.LOADED);
return
}var d=this._parseURLObject(f.readURL),g=d.url,c=d.responseDataProperty;
b.Data.post({url:g,data:this.get("requestData")||{},success:function(h){var i=c?h[c]:h;
this.set("data",i);
this.set("dataState",e.LOADED,{data:i})
},failure:function(){this.get("boundingBox").one(".list-items").setContent(this.get("strings.loadFail"));
this.set("dataState",e.LOAD_FAILED)
}},this)
},_parseURLObject:function(c){var d={url:null,requestData:null,responseDataProperty:null};
if(!c){return d
}if(b.Lang.isString(c)){return b.merge(d,{url:c||null})
}return b.merge(d,{url:c.url||null,requestData:c.requestData||null,responseDataProperty:c.responseDataProperty||null})
},_updateItem:function(g){var h=this._parseURLObject(this.get("apiURLs.updateURL")),f=h.url;
if(!f){return
}if(g.silent){return
}var c=g.target,d=c.get("data");
b.Data.post({url:f,data:d,success:function(i){if(this.get("mergeResponseData")){var e=this.get("mergeResponseDataProperty");
updatedItemData=e?responseData[e]:responseData;
c.set("data",b.merge(d,updatedItemData),{silent:true})
}},failure:function(e){c.set("data",g.prevVal,{silent:true})
}},this)
}},{CSS_PREFIX:"sqs-list",ASYNC_DATA:true,PUT_TEMPLATE:'div.controls>button.add-item[type="button"]<<div.list-title+div.list-items>div.empty<<',ATTRS:{strings:{value:{title:"Set strings.title to something.",addButton:"Add Item",emptyText:"No items.",loadFail:"Unable to load items."}},data:{value:[],getter:function(){var c=[];
this.each(function(d){c.push(d.get("data"))
},this);
return c
}},apiURLs:{value:{createURL:null,readURL:null,updateURL:null,deleteURL:null}},listItemConstructor:{value:b.Squarespace.DialogField2},requestData:{value:null},responseDataProperty:{value:null},mergeResponseData:{value:true,validator:b.Lang.isBoolean},mergeResponseDataProperty:{value:null},showAddControl:{value:true}}})
},"1.0",{requires:["widget-child","widget-parent","squarespace-dialog","squarespace-dialog-field-2"]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-coupon-list-template",function(c){var b=c.Handlebars;
(function(){var e=b.template,d=b.templates=b.templates||{};
d["coupon-list.html"]=e(function(i,j,g,f,h){g=g||i.helpers;
return'<div class="field-list clear">\n  <div class="title">Coupons</div>\n  <fieldset class="form-item fields">\n    <div class="foritem field">\n      <label class="caption">\n        Enter a promotion code to redeem a coupon\n      </label>\n      <div class="codeline">\n        <div class="codeleft">\n          <input name="promocode" \n                 class="enter-promocode field-element field-control" \n                 type="text" \n                 placeholder="Promo Code"\n                 spellcheck="false" />\n         </div>\n\n        <!-- Redeem Button -->\n        <div class="button redeem-coupon">Redeem</div> \n      </div>\n\n      <!-- List -->\n      <div class="coupon-list"></div>\n      <div class="invalid-coupon-title">\n        The coupons below are no longer valid. This can occur if a coupon expires\n        or if you remove an item from your shopping cart.\n      </div>\n\n      <!-- No Longer Valid Coupons -->\n      <div class="invalid-coupon-list"></div> \n    </div>\n  </fieldset>\n</div>'
})
})();
var a="coupon-list.html";
c.Handlebars.registerPartial(a.replace("/","."),b.templates[a])
},"1.0",{requires:["handlebars-base",]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-shopping-cart-template",function(c){var b=c.Handlebars;
(function(){var e=b.template,d=b.templates=b.templates||{};
d["shopping-cart.html"]=e(function(l,m,i,g,k){i=i||l.helpers;
var h,f=this;
function j(o,n){return'\n\n  <div class="cart-container">\n    <h2>Shopping Cart</h2>\n    <div class="cart">\n\n      <table class="table">\n        <thead class="thead"> \n          <tr class="row">\n            <td class="item">Item</td>\n            <td></td>\n            <td class="quantity">Quantity</td>\n            <td class="price">Price</td>\n            <td></td>\n          </tr>\n        <tbody class="tbody"></tbody>\n      </table>\n\n\n      <div class="subtotal">\n        <span class="label">Subtotal</span>\n        <span class="price"></span>\n      </div>\n      <div class="tax">\n        <div class="price"></div>\n        <div class="label">Tax</div>\n      </div>\n      <div class="shipping">\n        <div class="price"></div>\n        <div class="label"></div>\n      </div>\n      <div class="discounts">\n        <div class="price"></div>\n        <div class="label">Discounts</div>\n      </div>\n      <div class="total">\n        <div class="price"></div>\n        <div class="label">Grand Total</div>\n      </div>\n\n      <div class="totQty"></div>\n      <div class="suffix"></div>\n\n      <div class="checkout">\n        <div class="checkout-button">CHECKOUT</div>\n      </div>\n    </div>\n\n  </div>\n\n'
}h=m.strings;
h=i["with"].call(m,h,{hash:{},inverse:f.noop,fn:f.program(1,j,k)});
if(h||h===0){return h
}else{return""
}})
})();
var a="shopping-cart.html";
c.Handlebars.registerPartial(a.replace("/","."),b.templates[a])
},"1.0",{requires:["handlebars-base",]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-fixed-shopping-cart-template",function(c){var b=c.Handlebars;
(function(){var e=b.template,d=b.templates=b.templates||{};
d["fixed-shopping-cart.html"]=e(function(l,m,i,g,k){i=i||l.helpers;
var h,f=this;
function j(o,n){return'\n\n  <div class="cart-container">\n    <div class="cart">\n\n      <!-- body of the cart -->\n      <div class="table">\n        <div class="thead"> \n          <div class="row">\n            <div class="item">Item</div>\n            <div class="remove" style="height:10px"></div><!--spacer-->\n            <div class="price">Price</div>\n            <div class="qty">Quantity</div>\n          </div>\n        </div>\n        <div class="tbody"></div>\n      </div>\n\n      <div class="subtotal">\n        <div class="price"></div>\n        <div class="label">Subtotal</div>\n      </div>\n      <div class="tax">\n        <div class="price"></div>\n        <div class="label">Tax</div>\n      </div>\n      <div class="shipping">\n        <div class="price"></div>\n        <div class="label">Shipping</div>\n      </div>\n      <div class="discounts">\n        <div class="price"></div>\n        <div class="label">Discounts</div>\n      </div>\n      <div class="total-wrapper">\n        <div id="grand-total" class="total">\n          <div class="price"></div>\n          <div class="label">Grand Total</div>\n        </div>\n      </div>\n\n      <div class="checkout"></div>\n    </div>\n\n    <!-- Tabby thing -->\n    <div class="tab">\n      <div class="sqs-cart-icon"></div>\n      <div class="totQty"></div>\n      <div class="suffix"></div>\n    </div>\n   \n  </div>\n'
}h=m.strings;
h=i["with"].call(m,h,{hash:{},inverse:f.noop,fn:f.program(1,j,k)});
if(h||h===0){return h
}else{return""
}})
})();
var a="fixed-shopping-cart.html";
c.Handlebars.registerPartial(a.replace("/","."),b.templates[a])
},"1.0",{requires:["handlebars-base",]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-pill-shopping-cart-template",function(c){var b=c.Handlebars;
(function(){var e=b.template,d=b.templates=b.templates||{};
d["pill-shopping-cart.html"]=e(function(l,m,i,g,k){i=i||l.helpers;
var h,f=this;
function j(o,n){return'\n\n  <div class="cart-container">\n    <div class="cart">\n\n      <div class="sqs-cart-icon"></div>\n\n      <div class="checkout">\n        Cart&nbsp;-&nbsp;\n          <span class="totQty"></span>\n          <span class="suffix"></span>\n      </div>\n\n      <span class="subtotal">\n        <span class="price"></span>\n      </span>\n\n      <!-- Hidden -->\n      <div class="table">\n        <div class="thead"> \n          <div class="row">\n            <div class="item"></div>\n            <div class="qty"></div>\n            <div class="price"></div>\n          </div>\n        </div>\n        <div class="tbody"></div>\n      </div>\n\n      <div class="subtotal">\n        <div class="price"></div>\n        <div class="label"></div>\n      </div>\n      <div class="tax">\n        <div class="price"></div>\n        <div class="label"></div>\n      </div>\n      <div class="shipping">\n        <div class="price"></div>\n        <div class="label"></div>\n      </div>\n      <div class="discounts">\n        <div class="price"></div>\n        <div class="label"></div>\n      </div>\n      <div class="total">\n        <div class="price"></div>\n        <div class="label"></div>\n      </div>\n\n    </div>\n\n\n  </div>\n\n'
}h=m.strings;
h=i["with"].call(m,h,{hash:{},inverse:f.noop,fn:f.program(1,j,k)});
if(h||h===0){return h
}else{return""
}})
})();
var a="pill-shopping-cart.html";
c.Handlebars.registerPartial(a.replace("/","."),b.templates[a])
},"1.0",{requires:["handlebars-base",]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-responsive-confirmation-dialog",function(a){a.Squarespace.Widgets.ResponsiveConfirmationDialog=a.Base.create("shoppingCart",a.Squarespace.SSWidget,[],{isMobile:function(){return a.one(document).get("width")<=this.get("maxWidth")
}},{ATTRS:{maxWidth:{value:700}}});
a.Squarespace.Widgets.ResponsiveAlert=a.Base.create("shoppingCart",a.Squarespace.Widgets.ResponsiveConfirmationDialog,[],{initializer:function(b){this._normalDialog=new a.Squarespace.Alert(b)
},renderUI:function(){a.Squarespace.Widgets.ResponsiveAlert.superclass.renderUI.call(this)
},show:function(c,b){if(this.isMobile()){alert(c+". "+b)
}else{this._normalDialog.show(c,b)
}}},{CSS_PREFIX:"sqs-responsive-alert",HANDLEBARS_TEMPLATE:"responsive-alert.html"})
},"1.0",{requires:["node","base","anim","squarespace-ui-base"]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-autocomplete-types",function(a){a.namespace("Squarespace.Constants").AutocompleteTypes={GIVEN_NAME:"given-name",FAMILY_NAME:"family-name",CITY:"city",STATE:"state",POSTAL_CODE:"postal-code",COUNTRY_NAME:"country-name",CC_FULL_NAME:"cc-full-name",CC_NUMBER:"cc-number",CC_EXP_MOTNH:"cc-exp-month",CC_EXP_YEAR:"cc-exp-year",CC_CSC:"cc-csc"};
a.Squarespace.AutocompleteTypeATTR={value:null,writeOnce:"initOnly",validator:function(b){if(a.Lang.isNull(b)){return true
}else{if(!a.Object.hasValue(a.Squarespace.Constants.AutocompleteTypes,b)){console.warn(this.name+": That constant is not an available autocomplete type.");
return false
}else{return true
}}}}
},"1.0");/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-dialog-text-template",function(c){var b=c.Handlebars;
(function(){var e=b.template,d=b.templates=b.templates||{};
d["dialog-text.html"]=e(function(j,p,i,o,n){i=i||j.helpers;
var l="",g,k="function",m=this.escapeExpression,q=this;
function h(u,t){var r="",s;
r+='\n<div class="title">';
s=u.strings;
s=s==null||s===false?s:s.title;
s=typeof s===k?s():s;
r+=m(s)+"</div>\n";
return r
}function f(u,t){var r="",s;
r+='\n<div class="description">';
s=u.strings;
s=s==null||s===false?s:s.description;
s=typeof s===k?s():s;
r+=m(s)+"</div>\n";
return r
}g=p.strings;
g=g==null||g===false?g:g.title;
g=i["if"].call(p,g,{hash:{},inverse:q.noop,fn:q.program(1,h,n)});
if(g||g===0){l+=g
}l+='\n<input type="text"></input>\n';
g=p.strings;
g=g==null||g===false?g:g.description;
g=i["if"].call(p,g,{hash:{},inverse:q.noop,fn:q.program(3,f,n)});
if(g||g===0){l+=g
}l+="\n";
return l
})
})();
var a="dialog-text.html";
c.Handlebars.registerPartial(a.replace("/","."),b.templates[a])
},"1.0",{requires:["handlebars-base",]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-dialog-label",function(b){var a="-plugged";
b.namespace("Squarespace.Plugin").DialogFieldLabel=b.Base.create("dialogFieldLabel",b.Plugin.Base,[],{initializer:function(c){this.afterHostMethod("renderUI",this._render,this);
this.afterHostMethod("syncUI",this.syncLabel,this)
},destructor:function(){b.detach(this.get("id")+"|*");
var d=this.get("host"),c=d.get("boundingBox");
if(d.get("rendered")&&c&&c._node){d.get("boundingBox").removeClass(b.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+a)
}},_render:function(){this.renderLabel();
this.bindLabel();
this.syncLabel();
this.get("host").get("boundingBox").addClass(b.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+a)
},renderLabel:function(){this._labelNode=b.zen(b.Squarespace.Plugin.DialogFieldLabel.PUT_TEMPLATE);
this._labelNode.addClass(b.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX);
var f=this._labelNode,d=this.get("inField"),i=this.get("renderNode"),k=this.get("strings.text"),g=this.get("className"),c=this.get("forNode"),l=this.get("host"),h=l.get("contentBox");
if(g){f.addClass(g)
}if(i){if(b.Lang.isString(i)){i=h.one(i)
}i.appendChild(f)
}else{if(c){if(b.Lang.isString(c)){c=h.one(c)
}var j=c.getAttribute("id");
if(j){f.setAttribute("for",j)
}c.insert(f,"before")
}else{var e=h.one("input")||h.one("select")||h.one("textarea")||h.one("button");
e.insert(f,"before")
}}},bindLabel:function(){var c=this.get("id");
this.on(c+"|classNameChange",function(d){this._labelNode.removeClass(d.prevVal);
this._labelNode.addClass(d.newVal)
},this)
},syncLabel:function(){this._labelNode.setContent(this.get("strings.text"))
}},{NS:"label",CSS_PREFIX:"sqs-dialog-field-label",PUT_TEMPLATE:"label",ATTRS:{strings:{value:{text:""}},renderNode:{value:null},className:{value:null},forNode:{value:null}}});
b.namespace("Squarespace.DialogFields").DialogFieldLabel=function(c){this.plug(b.Squarespace.Plugin.DialogFieldLabel,b.merge({renderNode:c.labelRenderNode||null,forNode:c.labelForNode||null,className:c.labelClassName||null,"strings.text":this.get("strings.label")},c.labelConfig||{},this.getProperty("LABEL_CONFIG")||{}))
};
b.Squarespace.DialogFields.DialogFieldLabel.NAME="dialogFieldLabel"
},"1.0",{requires:["base","base-build","plugin","squarespace-dialog-field-2"]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-dialog-text",function(d){var c=d.namespace("Squarespace.DialogFields").Text=d.Base.create("text",d.Squarespace.DialogField2,[],{renderUI:function(){c.superclass.renderUI.call(this);
this._textField=this.get("contentBox").one("input[type]");
if(this.get("dialog")){this._textField.setAttribute("tabindex",this.get("dialog").getNextTabIndex())
}this._textField.set("type",this.get("password")?"password":"text");
var e=this.get("name");
if(e){this._textField.setAttribute("name",e)
}var f=this.get("autocompleteType");
if(f){this._textField.setAttribute("x-autocompletetype",f)
}this._set("errorFlyoutAnchor",this._textField);
this._textField.set("value",this.get("data"))
},bindUI:function(){c.superclass.bindUI.call(this);
var e=this.get("id");
this.after(e+"|dataChange",function(f){if(!f.dataSync){this._textField.set("value",f.newVal,{dataSync:true})
}this.hideError()
},this);
this._textField.after(e+"|valueChange",function(f){if(!f.dataSync){this.set("data",f.newVal,{dataSync:true})
}},this);
this._textField.on(e+"|click",function(f){f.halt()
});
this._textField.after(e+"|keyup",function(g){if((g.keyCode===13)&&this.get("submitOnEnter")){this.fire("submit");
var f=this.get("dialog");
if(f){f.saveAndClose()
}}},this)
},syncUI:function(){c.superclass.syncUI.call(this);
placeHolderText=this.get("strings.placeholder");
if(placeHolderText){this._textField.setAttribute("placeholder",placeHolderText)
}},focus:function(){c.superclass.focus.call(this);
if(this.get("rendered")){this._textField.focus()
}},blur:function(){c.superclass.blur.call(this);
if(this.get("rendered")){this._textField.blur()
}},disable:function(){c.superclass.disable.call(this);
if(this.get("rendered")){this._textField.setAttribute("disabled","disabled")
}},enable:function(){c.superclass.enable.call(this);
if(this.get("rendered")){this._textField.removeAttribute("disabled")
}}},{CSS_PREFIX:"sqs-text",HANDLEBARS_TEMPLATE:"dialog-text.html",ATTRS:{strings:{value:{placeholder:""}},data:{value:"",validator:d.Lang.isString},password:{value:false,validator:d.Lang.isBoolean},submitOnEnter:{value:false,validator:d.Lang.isBoolean},autocompleteType:d.Squarespace.AutocompleteTypeATTR}});
var b=d.Squarespace.DialogFields.LabeledText=d.Base.create("labeledText",d.Squarespace.DialogFields.Text,[d.Squarespace.DialogFields.DialogFieldLabel],{},{CSS_PREFIX:"sqs-labeled-text",LABEL_CONFIG:{forNode:"input[type]"}});
var a=d.Squarespace.DialogFields.MoneyText=d.Base.create("labeledText",d.Squarespace.DialogFields.LabeledText,[],{renderUI:function(){a.superclass.renderUI.call(this);
this.get("contentBox").one("input").plug(d.Squarespace.Plugin.MoneyFormatter)
},bindUI:function(){var e=this.get("contentBox").one("input");
e.on("valuechange",function(){this.set("data",e.moneyFormatterPlugin.get("data"))
},this)
}},{CSS_PREFIX:"sqs-money-text",LABEL_CONFIG:{forNode:"input[type]"},ATTRS:{data:{value:0,validator:d.Lang.isNumber}}})
},"1.0",{requires:["base","base-build","event-valuechange","squarespace-dialog-field-2","squarespace-dialog-text-css","squarespace-autocomplete-types","squarespace-dialog-text-template","squarespace-dialog-label"]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-autocomplete",function(a){a.namespace("Squarespace");
a.Squarespace.ACFormatters={};
a.Squarespace.DialogFields.AutoComplete=a.Base.create("autoComplete",a.Squarespace.DialogFields.Text,[],{initializer:function(b){this._acConfig=b.acConfig;
this._responseDataProperty=this._acConfig.responseDataProperty;
this._requireListEntry=this._acConfig.requireListEntry;
this._lastChoice=b.data||null;
this._input=null;
if(!this._acConfig.source){throw"No data source provided for AutoComplete"
}if(this._acConfig.activateFirstItem===undefined){this._acConfig.activateFirstItem=true
}if(!this._acConfig.resultHighlighter){this._acConfig.resultHighlighter="phraseMatch"
}if(this._responseDataProperty){this._requireListEntry=true
}},_onSelect:function(b){if(this._responseDataProperty){this.set("data",b.result.raw[this._responseDataProperty]);
this.set("dataObject",b.result.raw)
}else{this.set("data",b.result.text)
}this.fire("select",{data:this.get("data")})
},bindUI:function(){var d=this.get("contentBox");
this._input=d.one("input[type='text']");
this._input.plug(a.Plugin.AutoComplete,this._acConfig);
var e=this.get("contentBox").one("ul.yui3-aclist-list"),c=parseInt(e.getStyle("borderLeftWidth"),10),b=e.get("offsetWidth")-2*c;
e.setStyle("width",b);
this.after("dataChange",function(f){if(!f.noSyncUI){this._textField.set("value",f.newVal)
}});
this._input.ac.on("results",function(f){if(f.results.length===0){this.showError("No Results")
}},this);
if(this._acConfig.requireListEntry){this._input.on("blur",this._syncTextBox,this);
this._input.ac.on("select",this._onSelect,this)
}else{this._input.after("valueChange",function(f){this.set("data",f.newVal,{noSyncUI:true})
},this)
}},syncUI:function(b){a.Squarespace.DialogFields.AutoComplete.superclass.syncUI.call(this);
this._input.set("value",this.get("data"))
},focus:function(){this._input.focus()
},destructor:function(){this._input.ac.destroy()
},clear:function(){this.set("data",null);
this._input.set("value","")
}},{CSS_PREFIX:"sqs-autocomplete",ATTRS:{autoComplete:{readOnly:true,getter:function(){return this._input&&this._input.ac
}}}})
},"1.0",{requires:["squarespace-dialog-text","autocomplete","autocomplete-highlighters"]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-save-manager",function(a){a.namespace("Squarespace");
a.Squarespace.SaveManager=Class.create({_name:"SaveManager",_events:{complete:{},failed:{},"all-completed":{},dropped:{}},initialize:function(b){this.context=b;
this.saveExecuting=false;
var c=function(d,e){this.publish(e,d)
};
a.Object.each(this._events,c,this);
this.pendingSave=null
},_wrap:function(b,c){if(c){c=a.bind(c,this.context)
}return a.bind(function(d){if(c){c(d)
}b.apply(this)
},this)
},_success:function(){this.saveExecuting=false;
this.fire("complete");
this._run()
},_failure:function(){this.saveExecuting=false;
this.fire("failed");
this._run()
},_run:function(){if(!this.saveExecuting&&this.pendingSave){var b=this.pendingSave;
this.pendingSave=null;
if(a.Lang.isFunction(b.buildData)){b.data=b.buildData()
}this._doSave(b)
}else{if(!this.saveExecuting&&!this.pendingSave){this.fire("all-completed")
}}},_doSave:function(b){this.saveExecuting=true;
a.Data.post(b,this.context)
},save:function(b){b=a.clone(b);
b.success=this._wrap(this._success,b.success);
b.failure=this._wrap(this._failure,b.failure);
if(this.pendingSave){this.fire("dropped",this.pendingSave)
}this.pendingSave=b;
this._run()
},isSaveExecuting:function(){return this.saveExecuting
}});
a.augment(a.Squarespace.SaveManager,a.EventTarget)
},"1.0",{requires:["squarespace-util"]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-dialog-tagcloud",function(a){a.Squarespace.DialogFieldGenerators.tagcloud=Class.extend(a.Squarespace.DialogField,{initialize:function(c,b,d){this._super(c,b,d);
this.taglist=[];
this.sortFunction=this.weightSort;
this.cloud=a.DB.DIV("");
var f=a.DB.DIV("field-tag-title-box",a.DB.DIV("field-tag-title-text",{html:c.title}));
this.filterInputField=a.DB.DIV("field-tag-filter-box field-tag-inline",a.DB.INPUT("field-input field-tag-inline field-tag-filter-input",{type:"text",spellcheck:"false",placeholder:"Filter"}));
this.sortby=a.DB.DIV("field-tag-sort-box field-tag-inline",a.DB.DIV("field-tag-sort-text field-tag-inline"),a.DB.DIV("field-tag-sort-select field-tag-inline",{style:"position: relative;"},a.DB.DIV("field-tag-sort-inner",{html:"Weight"}),a.DB.SELECT("select field-tag-inline",a.DB.OPTION({html:"A-Z",value:"A-Z"}),a.DB.OPTION({html:"Activity",value:"Activity"}),a.DB.OPTION({html:"Weight",value:"Weight",selected:"true"}))));
var e=a.DB.DIV("button-block field-tag-inline",{style:"float: right;"},a.DB.INPUT({value:"Remove Selected",type:"button"}));
this.mergeButton=a.DB.DIV("button-block field-tag-inline",a.DB.INPUT("button-title",{value:"Rename",type:"button"}));
this.mergeInputField=a.DB.INPUT("field-input field-tag-input field-tag-inline",{type:"text",spellcheck:"false",placeholder:"New Name"});
if(this.config.maxtaglength){this.mergeInputField.setAttribute("maxlength",this.config.maxtaglength)
}this.headerField=a.DB.DIV("field-tag-header");
this.headerField.append(this.filterInputField);
this.headerField.append(this.sortby);
f.append(this.headerField);
this.footerField=a.DB.DIV({style:"opacity:0; overflow: hidden; height: 0;"},a.DB.DIV("field-tag-footer",this.mergeInputField,this.mergeButton,e));
this.html=a.DB.DIV("field-wrapper clear");
this.html.append(f);
this.html.append(this.cloud);
this.html.append(this.footerField);
this.panel.bodyEvents.push(this.cloud.on("click",this.onSelect,this));
this.panel.bodyEvents.push(e.on("click",this.onRemove,this));
this.panel.bodyEvents.push(this.mergeButton.on("click",this.onMerge,this));
this.panel.bodyEvents.push(this.filterInputField.on("keyup",this.onFilter,this));
this.panel.bodyEvents.push(this.mergeInputField.on("keydown",this.onKeyDown,this));
this.panel.bodyEvents.push(this.sortby.on("change",this.onSort,this));
this.panel.bodyEvents.push(a.on("got-tag-list",this.updateTags,this));
this.getCollectionTagsFromServer(this.config.collectionId,this)
},onFilter:function(c){var d=this.filterInputField.one(".field-tag-filter-input").get("value");
for(var b in this.taglist){if(this.taglist[b].name.indexOf(d)===0){this.taglist[b].hide=false
}else{this.taglist[b].hide=true
}}this.updateTags()
},onSort:function(c){var b=this.sortby.one(".select").get("value");
var d=this.sortby.one(".field-tag-sort-inner");
d.replace(a.DB.DIV("field-tag-sort-inner",{html:b}));
if(b=="Weight"){this.sortFunction=this.weightSort
}else{if(b=="Activity"){this.sortFunction=this.modifiedSort
}else{this.sortFunction=this.alphaSort
}}this.taglist.sort(this.sortFunction);
this.updateTags()
},onKeyDown:function(b){if(b.keyCode==13){this.onMerge(b)
}},onSelect:function(f){var d=f.target;
if(!d.hasClass("field-tag-list-item")){d=d.get("parentNode")
}if(d.hasAttribute("tag")){d.toggleClass("field-tag-item-selected");
var c=d.getAttribute("tag");
for(var b in this.taglist){if(this.taglist[b].name===c){if(this.taglist[b].selected){this.taglist[b].selected=false
}else{this.taglist[b].selected=true
}break
}}}var g=this.cloud.all(".field-tag-item-selected");
if(g.size()>1){this.mergeButton.one(".button-title").set("value","Merge")
}else{this.mergeButton.one(".button-title").set("value","Rename")
}if(g.size()>0){this.showFooter()
}else{this.hideFooter()
}},onRemove:function(){var b,c;
if(this.config.mode=="category"){b="Remove Category(s)";
c="Are you sure you would like to remove Category? <Strong>All items with this category will be updated.</strong>"
}else{b="Remove Tag(s)","Are you sure you would like to remove Tag(s)? <Strong>All items with this tag will be updated.</strong>";
c="Are you sure you would like to remove Tag(s)? <Strong>All items with this tag will be updated.</strong>"
}new a.Squarespace.ConfirmationDialog().show(b,c,function(){var e=this.cloud.all(".field-tag-item-selected");
if(e.size()<=0){console.log("no tags selected to remove");
return
}var d=[];
e.each(function(h){var g=h.getAttribute("tag");
d.push(g);
for(var f in this.taglist){if(g===this.taglist[f].name){delete this.taglist[f];
break
}}},this);
this.removeCollectionTagsFromServer(d,this.config.collectionId);
this.updateTags()
},this)
},onMerge:function(){var c=a.Lang.trim(this.footerField.one(".field-tag-input").get("value"));
if(c<=0){console.log("no new name");
return
}var e=this.cloud.all(".field-tag-item-selected");
if(e.size()<=0){return
}var b,d;
if(e.size()===1){if(this.config.mode=="category"){b="Rename Category";
d="Are you sure you would like to rename Category? <strong>All items with this category will be updated.</strong>"
}else{b="Rename Tag";
d="Are you sure you would like to rename Tag? <strong>All items with this tag will be updated.</strong>"
}}else{if(this.config.mode=="category"){b="Merge Categories";
d="Are you sure you would like to merge Categories to the new name? <strong>All items with these categories will be updated.</strong>"
}else{b="Merge Tags";
d="Are you sure you would like to merge Tags to the new name? <strong>All items with these tags will be updated.</strong>"
}}new a.Squarespace.ConfirmationDialog().show(b,d,function(){var f=[];
var g=0;
this.footerField.one(".field-tag-input").set("value","");
e.each(function(k){var j=k.getAttribute("tag");
f.push(j);
for(var h in this.taglist){if(j===this.taglist[h].name){g+=this.taglist[h].count;
delete this.taglist[h];
break
}}e.remove(k)
},this);
this.mergeCollectionTagsOnServer(f,c,this.config.collectionId);
this.addTag(c,g)
},this)
},addTag:function(c,e){var b=null;
for(var d in this.taglist){if(c===this.taglist[d].name){b=this.taglist[d];
break
}}if(b===null){b={name:c,count:e};
this.taglist.push(b)
}else{b.count+=e
}this.taglist.sort(this.sortFunction);
this.updateTags()
},updateTags:function(){this.cloud.empty();
this.cloud.append(this.genarateTagList(this.taglist));
a.Squarespace.Library.getCollection(this.config.collectionId).reset()
},genarateTagList:function(l){if(!l||l.length<=0){var k;
if(this.config.mode=="category"){k="This collection does not contain any categories."
}else{k="This collection does not contain any tags."
}return a.DB.DIV("field-tag-no-items",{html:k})
}var e=null,j=null,b=80,h,f,c=50;
for(var g in l){if(l[g].count>j||j===null){j=l[g].count
}if(l[g].count<e||e===null){e=l[g].count
}}if(e<1){e=0.1
}var d=a.DB.DIV("field-tag-cloud");
for(var g in l){if(!l.hasOwnProperty(g)||l[g].hide){continue
}if(e==j){f=100
}else{if(l[g].count<1){f=c
}else{h=(Math.log(l[g].count)-Math.log(e))/(Math.log(j)-Math.log(e));
f=parseInt(h*(100-c)+c,10)
}}d.append(a.DB.LI("field-tag-list-item "+(l[g].selected?"field-tag-item-selected":""),{tag:l[g].name,title:l[g].count,style:"color: hsl(0, 0%, "+f+"%)"},a.DB.SPAN("field-tag-name",{html:l[g].name})))
}return d
},alphaSort:function(b,c){return b.name.toLocaleLowerCase().localeCompare(c.name.toLocaleLowerCase())
},weightSort:function(b,c){return c.count-b.count
},modifiedSort:function(b,c){return c.modifiedOn-b.modifiedOn
},hideFooter:function(){this.footerField.setStyles({transitionProperty:"transform, height, opacity",transitionDuration:".3s",transitionTimingFunction:"ease-out"});
this.footerField.setStyle("height","0px");
this.footerField.setStyle("opacity","0")
},showFooter:function(){var b=this.footerField.one(".field-tag-footer").getComputedStyle("height");
this.footerField.setStyles({transitionProperty:"transform, height, opacity",transitionDuration:".3s",transitionTimingFunction:"ease-out"});
this.footerField.setStyle("height",b);
this.footerField.setStyle("opacity","1")
},getCollectionTagsFromServer:function(c){if(this.config.testdata){this.taglist=this.config.testdata;
this.taglist.sort(this.sortFunction);
a.fire("got-tag-list");
return
}var b="/api/commondata/GetCollectionTags";
if(this.config.mode=="category"){b="/api/commondata/GetCollectionCategories"
}a.Data.get({url:b,data:{collectionId:c},success:function(d){this.taglist=d;
this.taglist.sort(this.sortFunction);
a.fire("got-tag-list")
},failure:function(d){console.log("Failed to get collection tags")
}},this)
},removeCollectionTagsFromServer:function(c,e){if(this.config.testdata){return
}var b="/api/commondata/RemoveTag",d={collectionId:e};
if(this.config.mode=="category"){b="/api/commondata/RemoveCategory";
d.category=c
}else{d.tags=c
}a.Data.post({url:b,data:d,success:function(f){if(this.config.mode=="category"){f=f.collectionCategories
}else{f=f.collectionTags
}this.taglist=f;
this.taglist.sort(this.sortFunction);
a.fire("got-tag-list")
},failure:function(f){console.log("Failed to remove tag")
}},this)
},mergeCollectionTagsOnServer:function(d,c,f){if(this.config.testdata){return
}var b="/api/commondata/MergeTags",e={collectionId:f};
if(this.config.mode=="category"){b="/api/commondata/MergeCategories";
e.newcategory=c;
e.oldcategory=d
}else{e.newtag=c;
e.oldtag=d
}a.Data.post({url:b,data:e,success:function(g){if(this.config.mode=="category"){g=g.collectionCategories
}else{g=g.collectionTags
}this.taglist=g;
this.taglist.sort(this.sortFunction);
console.log("replace with server values");
a.fire("got-tag-list")
},failure:function(g){console.log("Failed to merge/rename tags")
}},this)
}})
},"1.0",{requires:["squarespace-dialog"]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-storage-lite",function(b){var q=b.config.doc,i=b.config.win,c=b.JSON,p=b.namespace("StorageLite"),h="yui_storage_lite",t="YUI StorageLite data",v=1048576,o="1.0",r="ready",u=0,g=1,a=2,l=3,j=4,e="yui_storage_lite",k="data",s={},m,f;
try{if(i.localStorage){f=g
}else{if(i.globalStorage){f=a
}else{if(i.openDatabase&&navigator.userAgent.indexOf("Chrome")===-1){f=l
}else{if(b.UA.ie>=5){f=j
}else{f=u
}}}}}catch(n){f=u
}b.StorageFullError=function(d){b.StorageFullError.superclass.constructor.call(d);
this.name="StorageFullError";
this.message=d||"Maximum storage capacity reached";
if(b.UA.ie){this.description=this.message
}};
b.extend(b.StorageFullError,Error);
b.augment(p,b.EventTarget,true,null,{emitFacade:true,prefix:"storage-lite",preventable:false});
p.publish(r,{fireOnce:true});
b.mix(p,{clear:function(){},getItem:function(w,d){return null
},length:function(){return 0
},removeItem:function(d){},setItem:function(d,w){}});
if(f===g||f===a){b.mix(p,{length:function(){return m.length
},removeItem:function(d){m.removeItem(d)
},setItem:function(w,x,d){m.setItem(w,d?c.stringify(x):x)
}},true);
if(f===g){m=i.localStorage;
b.mix(p,{clear:function(){m.clear()
},getItem:function(x,w){try{return w?c.parse(m.getItem(x)):m.getItem(x)
}catch(d){return null
}}},true)
}else{if(f===a){m=i.globalStorage[i.location.hostname];
b.mix(p,{clear:function(){for(var d in m){if(m.hasOwnProperty(d)){m.removeItem(d);
delete m[d]
}}},getItem:function(x,w){try{return w?c.parse(m[x].value):m[x].value
}catch(d){return null
}}},true)
}}p.fire(r)
}else{if(f===l||f===j){b.mix(p,{clear:function(){s={};
p._save()
},getItem:function(w,d){return s.hasOwnProperty(w)?s[w]:null
},length:function(){var w=0,d;
for(d in s){if(s.hasOwnProperty(d)){w+=1
}}return w
},removeItem:function(d){delete s[d];
p._save()
},setItem:function(w,x,d){s[w]=x;
p._save()
}},true);
if(f===l){m=i.openDatabase(h,o,t,v);
b.mix(p,{_save:function(){m.transaction(function(d){d.executeSql("REPLACE INTO "+h+" (name, value) VALUES ('data', ?)",[c.stringify(s)])
})
}},true);
m.transaction(function(d){d.executeSql("CREATE TABLE IF NOT EXISTS "+h+"(name TEXT PRIMARY KEY, value TEXT NOT NULL)");
d.executeSql("SELECT value FROM "+h+" WHERE name = 'data'",[],function(y,x){if(x.rows.length){try{s=c.parse(x.rows.item(0).value)
}catch(w){s={}
}}p.fire(r)
})
})
}else{if(f===j){m=q.createElement("span");
m.addBehavior("#default#userData");
b.mix(p,{_save:function(){var w=c.stringify(s);
try{m.setAttribute(k,w);
m.save(e)
}catch(d){throw new b.StorageFullError()
}}},true);
b.on("domready",function(){q.body.appendChild(m);
m.load(e);
try{s=c.parse(m.getAttribute(k)||"{}")
}catch(d){s={}
}p.fire(r)
})
}}}else{p.fire(r)
}}},"1.0.0",{requires:["event-base","event-custom","event-custom-complex","json"]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-library",function(a){a.namespace("Squarespace");
a.Squarespace._wrapData=function(g,f,d,h){var b=[];
for(var e=0;
e<d.length;
e++){var c=(h?h[(d[e].type?d[e].type:d[e].recordType)]:f);
if(!c){c=f
}b.push(new c(g,d[e]))
}return b
};
a.Squarespace.EditorInstanceCache={};
a.Squarespace.CollectionUtils={updateItemDisplayIndices:function(c,b){b.each(function(e,d){if(e.data()&&e.data().item){e.data().item.setDisplayIndex(d)
}})
}};
a.Squarespace.ItemUtils={startAutoSave:function(b){this.saveTimer=a.later(10000,this,this.autoSave,b,true)
},attachStandardItemDialogHandlers:function(b){b.on("remove-requested",function(){var d=this.getAnchorData();
var c=true;
if(this.params.parentDialog&&this.params.parentDialog.params.overlay){c=false
}new a.Squarespace.ConfirmationDialog({showScreenOverlay:c}).show((d.getUnsaved&&d.getUnsaved()?"Discard Post":"Remove "+d.getPresentationName()),(d.getUnsaved()?"Are you sure you wish to discard this post?":"Are you sure you wish to remove this "+d.getPresentationName().toLowerCase()+"?"),function(){a.Squarespace.ItemUtils.removeItem(d);
this.edited=false;
this.editedSinceLastSave=false;
this.close()
},this)
})
},stopAutoSave:function(){if(this.saveTimer){this.saveTimer.cancel()
}},autoSave:function(b,c){if(b===null){this.stopAutoSave();
console.warn("Autosave was not properly stoped, underlaying dialoy destroyed. Stopping timer.");
return
}if(b.getEditedSinceLastSave()||c){b.updateAutoSave();
b.params.waitForServerOnClose=false;
b.autoSave=true;
b.send();
b.params.waitForServerOnClose=true
}},removeItem:function(b){if(b.dd){b.dd.destroy()
}b.remove();
if(a.Squarespace.ACTIVE_MANAGER&&a.Squarespace.ACTIVE_MANAGER.emptyStateCheck){a.Squarespace.ACTIVE_MANAGER.emptyStateCheck()
}},getStandardOptions:function(b){return[]
},constructTagsEl:function(e){var b=null;
if(e.getTags()&&e.getTags().length>0){var d=[];
for(var c=0;
c<e.getTags().length;
++c){d.push(a.DB.DIV("tag",{html:e.getTags()[c]}))
}b=a.DB.DIV("tags clear",d)
}return b
},removeNode:function(c,e){if(!c){return
}var d;
c.addClass("removing");
c.setStyle("overflow","hidden !important");
if(e=="vertical"){d={height:0,paddingTop:0,paddingBottom:0,marginTop:0,marginBottom:0}
}else{d={width:0,paddingLeft:0,paddingRight:0,marginLeft:0,marginRight:0}
}var b=new a.Anim({node:c,to:d,duration:0.3,easing:a.Easing.easeOutStrong});
b.on("end",function(){this.get("node").remove()
});
b.run()
},getSimpleEditableContentBlock:function(){return{layout:a.JSON.stringify({columns:12,rows:[{columns:[{span:12,rows:[{columns:[{span:12,blocks:Array.prototype.slice.call(arguments)}]}]}]}]})}
},getSimpleHTMLEditableContentBlock:function(b){return this.getSimpleEditableContentBlock(a.Squarespace.ItemUtils.makeBlock(a.Squarespace.WidgetTypes.HTML,{html:b,wysiwyg:{html:b}}))
},makeBlock:function(b,c){return{type:b,id:a.Squarespace.Utils.getGuid(),value:c}
}};
a.Squarespace.PageLayoutTools={getBlocks:function(b){var d=[];
if(b&&b.rows){for(var c=0;
c<b.rows.length;
c++){d=d.concat(this._getBlocksRow(b.rows[c]))
}}return d
},_getBlocksRow:function(d){var c=[];
for(var b=0;
b<d.columns.length;
b++){c=c.concat(this._getBlocksColumn(d.columns[b]))
}return c
},_getBlocksColumn:function(b){var d=[];
if(b.rows){for(var c=0;
c<b.rows.length;
c++){d=d.concat(this._getBlocksRow(b.rows[c]))
}}if(b.blocks){d=d.concat(b.blocks)
}return d
}};
a.Squarespace.CollectionModel=Class.create({_name:"CollectionModel",defaultProperties:{title:"Generic",contentType:null,ordering:a.Squarespace.CollectionOrdering.CHRONOLOGICAL,acceptTypes:[],addText:null,icon:null,emptyText:"",filename:null,folder:false,type:null,forcePageSize:false},initialize:function(b){this.properties=a.merge(this.defaultProperties,b);
this._debug=new a.Squarespace.Debugger({name:this._name,output:false});
this._debug.log("Created New Model",["Source",b],["Title",this.getTitle()],["Ordering",this.getOrdering()],["typeName",this.getCollectionType()]);
this.items=[]
},getTitle:function(){return this.properties.title
},getTypeName:function(){return this.properties.typeName
},getForcePageSize:function(){return this.properties.forcePageSize
},setCollectionType:function(b){this.properties.typeName=b
},getCollectionType:function(){return this.properties.typeName
},getEmptyText:function(){return"This "+this.getTitle()+" contains no items. "+(this.getOrdering()==a.Squarespace.CollectionOrdering.USER?"Drag and drop images from your desktop to add some.":"Click here to add your first item.")
},getType:function(){return this.properties.type
},setType:function(b){this.properties.type=b
},getContentType:function(){if(this.getType()){return this.getType()
}switch(this.getOrdering()){case a.Squarespace.CollectionOrdering.CHRONOLOGICAL:return a.Squarespace.CollectionTypes.GENERIC;
case a.Squarespace.CollectionOrdering.USER:return a.Squarespace.CollectionTypes.GENERIC;
case a.Squarespace.CollectionOrdering.CALENDAR:return a.Squarespace.CollectionTypes.GENERIC;
default:return a.Squarespace.CollectionTypes.PAGE
}},getAcceptTypes:function(){if(this.isFolder()&&(!this.properties.acceptTypes||this.properties.acceptTypes.length===0)){var c=[];
for(var b in a.Squarespace.CollectionModels){if(a.Squarespace.CollectionModels[b].isFolder()){continue
}c.push(b)
}c.push("link");
c.push("page");
if(a.Squarespace.Utils.isCommerceEnabled()){c.push("products")
}this.properties.acceptTypes=c
}return this.properties.acceptTypes
},hasAcceptType:function(d){var g=this.getBaseAcceptTypes();
for(var c=0;
c<g.length;
c++){if(g[c]==d){return true
}}var e=this.getCustomAcceptTypes();
for(var b=0;
b<e.length;
b++){var f=a.Squarespace.Library.getCustomTypeByName(e[c]);
if(f&&f.base==d){return true
}}return false
},getBaseAcceptTypes:function(){var c=[];
for(var b=0;
b<this.properties.acceptTypes.length;
b++){if(a.Squarespace.Library.isBaseType(this.properties.acceptTypes[b])){c.push(this.properties.acceptTypes[b])
}}return c
},getCustomAcceptTypes:function(){var c=[];
for(var b=0;
b<this.properties.acceptTypes.length;
b++){if(!a.Squarespace.Library.isBaseType(this.properties.acceptTypes[b])){c.push(this.properties.acceptTypes[b])
}}return c
},canSupportAcceptType:function(b){return(this.getAcceptTypes().indexOf(b)>=0)
},getOrdering:function(){if(a.Lang.isString(this.properties.ordering)){var b=this.properties.ordering;
switch(b){case"chronological":b=a.Squarespace.CollectionOrdering.CHRONOLOGICAL;
break;
case"user":b=a.Squarespace.CollectionOrdering.USER;
break;
case"calendar":b=a.Squarespace.CollectionOrdering.CALENDAR;
break;
case"user-orderable":b=a.Squarespace.CollectionOrdering.USER;
break;
default:b=a.Squarespace.CollectionOrdering.CHRONOLOGICAL;
break
}this.properties.ordering=b;
this.properties.contentType=b
}if(!this.properties.contentType){this.properties.contentType=this.properties.ordering
}return this.properties.contentType
},getAddText:function(){return this.properties.addText
},getIcon:function(){return this.properties.icon
},getView:function(){return this.properties.view
},getFilename:function(){return this.properties.filename
},getItems:function(){return this.items
},setItems:function(b){this.items=b
},addItem:function(b){if(this.items.indexOf(b)===-1){this.items.push(b)
}},removeItem:function(b){this.items.push(b)
},getPageSize:function(){return this.properties.pageSize
},isFolder:function(){return !!this.properties.folder
}});
a.Squarespace.Collection=Class.create({_name:"Collection",initialize:function(b){this.params=b;
if(!this.params.configuration){this.params.configuration={}
}this._debug=new a.Squarespace.Debugger({name:'Collection "'+this.getTitle()+'"'})
},isPrimary:function(){return this.params.primary
},getId:function(){return this.params.id
},getClassName:function(){return this.getTypeLabel()
},getSectionName:function(){return"genericcollection"
},getInstructions:function(){return"This is apparently a generic collection."
},getConfiguration:function(){return this.params.configuration||{}
},setConfiguration:function(b){this.params.configuration=b
},getData:function(){return this.getConfiguration()
},setData:function(b){this.setConfiguration(b)
},getDataField:function(b){return this.getData()[b]
},setDataField:function(c,b){var d=this.getData();
if(a.Lang.isUndefined(b)||a.Lang.isNull(b)){delete d[c]
}else{d[c]=b
}this.setData(d)
},getTitle:function(){return this.params.title
},setTitle:function(b){this.params.title=b
},getEnabled:function(){return this.params.enabled
},setEnabled:function(b){this.params.enabled=b
},getDescription:function(){return this.params.description
},setDescription:function(b){this.params.description=b
},getNavigationTitle:function(){return this.params.navigationTitle||this.params.title
},setNavigationTitle:function(b){this.params.navigationTitle=b
},getSystemDataId:function(){return this.params.systemDataId
},setSystemDataId:function(b){this.params.systemDataId=b
},getCategories:function(){return this.params.categories
},setCategories:function(b){this.params.categories=b
},getTags:function(){return this.params.tags
},setTags:function(b){this.params.tags=b
},hasImage:function(){return this.data.systemDataId!==null
},getOrdering:function(){return this.params.ordering
},setOrdering:function(b){this.params.ordering=b
},getStarred:function(){return this.params.starred
},setStarred:function(b){this.params.starred=b
},getEncryptedPassword:function(){return this.params.encryptedPassword
},setEncryptedPassword:function(b){this.params.encryptedPassword=b
},getUrlId:function(){return this.params.urlId
},setUrlId:function(b){this.params.urlId=b
},getUrl:function(){return this.getUrlId()
},getMainImageId:function(){return this.params.mainImageId
},setMainImageId:function(b){this.params.mainImageId=b
},getiTunesImageId:function(){return this.params.iTunesImageId
},setiTunesImageId:function(b){this.params.iTunesImageId=b
},isFolder:function(){return this.params.folder
},setFolder:function(b){this.params.folder=b
},getDropdown:function(){return this.params.dropdown
},setDropdown:function(b){this.params.dropdown=b
},getFolderOverviewCollectionId:function(){return this.params.folderOverviewCollectionId
},setFolderOverviewCollectionId:function(b){this.params.folderOverviewCollectionId=b
},getFolderBehavior:function(){return this.params.folderBehavior
},setFolderBehavior:function(b){this.params.folderBehavior=b
},getPostByEmailAddress:function(){return !!this.params.postByEmailAddress?this.params.postByEmailAddress+"@"+Static.SQUARESPACE_CONTEXT.appDomain:""
},setPostByEmailAddress:function(b){this.params.postByEmailAddress=b
},getMainImage:function(){if(this.params.mainImage&&!a.instanceOf(this.params.mainImage,a.Squarespace.Models.Item)){this.params.mainImage=new a.Squarespace.Models.Item(this.params.mainImage)
}else{if(this.params.mainImageId&&!this.params.mainImage){this.params.mainImage=new a.Squarespace.Models.Item({id:this.params.mainImageId})
}}return this.params.mainImage
},getiTunesImage:function(){if(this.params.iTunesImage&&!a.instanceOf(this.params.mainImage,a.Squarespace.Models.Item)){this.params.iTunesImage=new a.Squarespace.Models.Item(this.params.iTunesImage)
}else{if(this.params.iTunesImageId&&!this.params.iTunesImage){this.params.iTunesImage=new a.Squarespace.Models.Item({id:this.params.iTunesImageId})
}}return this.params.iTunesImage
},getType:function(){return this.params.type
},getTypeLabel:function(){return this.params.typeLabel
},getTypeName:function(){return this.params.typeName
},setTypeName:function(b){this.params.typeName=b
},getRegionName:function(){return this.params.regionName
},setRegionName:function(b){this.params.regionName=b
},getCollectionType:function(){return this.getTypeName()
},setCollectionType:function(b){return this.setTypeName(b)
},getContentType:function(){return this.getType()
},setAcceptTypes:function(b){this.params.acceptTypes=b
},getAcceptTypes:function(){return this.params.acceptTypes
},getItemCount:function(){return this.params.itemCount
},incrementItemCount:function(b){if(a.Lang.isUndefined(b)){b=1
}this.params.itemCount++
},getNextDisplayIndex:function(){if(this.getItemCount()){return this.getItemCount()
}if(!this.items||!this.items.length){return 0
}var b=this.items[this.items.length-1].displayIndex;
if(b){return b+1
}else{return this.items.length
}},getPageSize:function(){return this.params.pageSize
},getModelPageSize:function(){return this.getModel()?this.getModel().getPageSize():20
},setPageSize:function(b){this.params.pageSize=b
},getPossibleCollectionTypes:function(k){var g=a.Squarespace.Library.getCollectionType(this.getTypeName());
var p=this.getOrdering();
var o=g.getAcceptTypes();
var m=this.getTypeName();
var f=[];
k=k||a.Squarespace.Library.getCollectionTypes();
for(var h in k){var l=k[h];
var n=0;
if(l.getType()!=this.getType()){continue
}if(l.getOrdering()===p){n++;
this._debug.log(["Model Matched",l.getTitle()],["Ordering",p,"===",l.getOrdering()])
}else{continue
}if(l.getTitle()===m){n++;
this._debug.log(["Model Matched",l.getTitle()],["Name",m,"===",l.getTitle()])
}if(o.length){var b=[];
for(var e=0;
e<o.length;
e++){if(l.getAcceptTypes().indexOf(o[e])>=0){b.push(o[e])
}}if(b.length>0){this._debug.log(["Model Matched",l.getTitle()],["Accept Type",o,l.getAcceptTypes(),b]);
n=n+((b.length/l.getAcceptTypes().length)*1)
}else{n--
}}if(n>=1){this._debug.log(["Returning Model",l.getTitle()],["Points",n]);
f.push({points:n,model:l})
}}f=f.sort(function(j,i){return j.points<i.points
});
var d=[];
for(var c=0;
c<f.length;
c++){d.push(f[c].model)
}return d
},getLabel:function(){return this.params.typeLabel.substring(0,1).toUpperCase()+this.params.typeLabel.substring(1)
},touch:function(){this.params.updatedOn=new Date().getTime()
},isSyncPending:function(){if(this.params.status){var b=(this.params.status=="pending");
return b
}else{return false
}},isSyncError:function(){if(this.params.status){var b=(this.params.status==="error");
return b
}else{return false
}},updateNavigation:function(b){this.setNavigationId(b);
a.Data.post({url:"/api/commondata/MoveCollectionToNavigation",data:{collectionId:this.getId(),navigationId:b},success:function(c){this.fire("collection-moved")
}},this)
},updatePosition:function(b){a.Data.post({url:"/api/commondata/SwapCollections",data:{collectionId:this.getId(),newPosition:b},success:function(c){this.fire("collections-swapped")
}},this)
},removeItems:function(c,g){this.fire("items-removing");
var b=[];
for(var d=0;
d<c.length;
++d){var e=c[d];
b[d]=e.getId();
this._removeItem(e)
}var f={items:b};
if(g&&g.removeExampleContent){f.removeExampleContent=g.removeExampleContent
}a.Data.post({url:"/api/commondata/RemoveItems",data:f,success:function(h){this.fire("items-removed");
this.reset()
}},this)
},_removeItem:function(c){if(!this.items){return
}for(var b=0;
b<this.items.length;
++b){var d=this.items[b];
if(d.id===c.getId()){this.items.splice(b,1)
}}this.params.itemCount--
},getItems:function(c){var b={collectionId:this.getId(),page:1,pageSize:20};
a.Data.get({url:"/api/commondata/GetItems",data:a.merge(b,c),success:function(d){delete this.itemsById;
this.items=d.items;
if(d.items){this.params.itemCount=d.items.length
}else{this.params.itemCount=0
}this.fire("items-ready",d.pagination,a.Squarespace._wrapData(this,a.Squarespace.Item,d.items,a.Squarespace.CollectionLibraryTypesByModule[this.getType()]),this)
}},this)
},getItem:function(c){if(!this.itemsById){this.itemsById={};
for(var b=0;
b<this.items.length;
b++){this.itemsById[this.items[b].id]=this.items[b]
}}return this.itemsById[c]
},getFolderItems:function(c){var b={collectionId:this.getId()};
a.Data.get({url:"/api/commondata/GetItems",data:a.merge(b,c),success:function(d){this.fire("folderItems-ready",d)
}},this)
},reset:function(){if(this.isRemoved()){return
}a.Data.get({url:"/api/commondata/GetCollection",data:{collectionId:this.getId()},success:function(b){this.params.mainImage=null;
this.params.iTunesImage=null;
this.params=a.merge(this.params,b);
this.fire("reset")
}},this)
},save:function(){if(this._editorInstance){var b=this._editorInstance.getData();
if(b.flickrConnect){var d=this.getConfiguration();
d.flickrConnect=b.flickrConnect;
this.setConfiguration(d)
}}var c=this.getEncryptedPassword();
var e={url:"/api/commondata/SaveCollection",data:a.merge({collectionId:this.getId(),enabled:this.getEnabled(),mainImageId:this.getMainImageId(),type:this.getType(),urlId:this.getUrlId(),title:this.getTitle(),navigationTitle:this.getNavigationTitle(),password:(c===null?undefined:c),description:this.getDescription(),configuration:this.getConfiguration()||{},typeName:this.getTypeName(),regionName:this.getRegionName(),ordering:this.getOrdering(),pageSize:this.getPageSize(),folder:this.isFolder(),rssFeedReplacementUrl:this.params.rssFeedReplacementUrl,headerInjectCode:this.params.headerInjectCode,postItemInjectCode:this.params.postItemInjectCode,iTunesEnabled:this.params.iTunesEnabled,iTunesAuthor:this.params.iTunesAuthor,iTunesSubtitle:this.params.iTunesSubtitle,iTunesSummary:this.params.iTunesSummary,iTunesKeywords:this.params.iTunesKeywords,iTunesCategories:this.params.iTunesCategories,iTunesOwner:this.params.iTunesOwner,iTunesOwnerEmail:this.params.iTunesOwnerEmail,iTunesImageId:this.getiTunesImageId(),iTunesExplicit:this.params.iTunesExplicit},this._getFolderData()),success:function(f){this.params=f;
this.setConfiguration(f.configuration);
Static.SQUARESPACE_CONTEXT.collectionsById[f.id]=this;
this.fire("save",this)
},failure:function(f){this.fire("save-failed",f)
}};
if(this._editorInstance){e.failure={dialog:this._editorInstance}
}a.Data.post(e,this)
},remove:function(){this._removing=true;
a.Data.post({url:"/api/commondata/RemoveCollection",data:{collectionId:this.getId()},success:this._remove,failure:function(b){if(b.notFound){this._remove()
}}},this)
},_remove:function(){delete Static.SQUARESPACE_CONTEXT.collectionsById[this.getId()];
this._removed=true;
this.fire("remove");
a.fire("remove-collection",this)
},isRemoved:function(){return this._removing||this._removed
},getModel:function(){if(this.getType()==a.Squarespace.CollectionTypes.TemplatePages){return a.Squarespace.Library.templatePageCollectionModel
}var d=a.Squarespace.Library.getCollectionType(this.getTypeName());
if(this.isFolder()&&!d.isFolder()){var b=a.Squarespace.Library.getCollectionTypes();
for(var c in b){if(b[c].isFolder()){this.setModel(b[c]);
this.setTypeName(c);
break
}}}return d
},setModel:function(b){this.model=b
},isSupported:function(){if(this.getType()==a.Squarespace.CollectionTypes.GENERIC){return(a.Squarespace.Library.getCollectionTypes()[this.getCollectionType()]?true:false)
}else{return true
}},isItemSupported:function(d){var e=a.Squarespace.ContentConstantsString[d.getRecordType()];
if(this.getModel().hasAcceptType(e)){if(this.getModel().getBaseAcceptTypes().indexOf(e)==-1){var c=this.getModel().getCustomAcceptTypes();
for(var b=0;
b<c.length;
b++){if(a.Squarespace.Library.getCustomTypeByName(c[b]).base==e){d.setCustomContentType(c[b]);
break
}}}return true
}return false
},_getFolderData:function(){if(this.isFolder()){return{dropdown:this.getDropdown(),folderOverviewCollectionId:this.getFolderOverviewCollectionId(),folderBehavior:this.getFolderBehavior()}
}else{return{}
}},onDialogReady:function(c){var b=c.getField("mainImage");
var d=c.getField("iTunesImage");
if(b.get("data")){b.get("data").load()
}if(d&&d.get("data")){d.get("data").load()
}},render:function(){},postRender:function(){},destroy:function(){},isCustomRendered:function(){return false
},getClass:function(){var d=[];
if(this.isFolder()){d.push("collection-icon-folder");
if(this.getModel()&&this.getModel().getIcon()){d.push("collection-icon-"+this.getModel().getIcon())
}}else{switch(this.getType()){case a.Squarespace.CollectionTypes.GENERIC:if(this.getModel()&&!this.getModel().isFolder()){switch(this.getOrdering()){case a.Squarespace.CollectionOrdering.USER:d.push("collection-user-ordered");
break;
case a.Squarespace.CollectionOrdering.CHRONOLOGICAL:d.push("collection-chronological-ordered");
break;
case a.Squarespace.CollectionOrdering.CALENDAR:d.push("collection-calendar-ordered");
break
}}break;
case a.Squarespace.CollectionTypes.PAGE:d.push("collection-page");
break;
case a.Squarespace.CollectionTypes.SPLASH_PAGE:d.push("collection-icon-splash-page");
break;
case a.Squarespace.CollectionTypes.PRODUCT:d.push("collection-type-product");
break
}var b=this.getModel();
if(b){var c=b.getIcon();
if(c){d.push("collection-icon-"+b.getIcon())
}else{if(b.isFolder()){d.push("collection-icon-folder")
}else{switch(this.getOrdering()){case a.Squarespace.CollectionOrdering.USER:d.push("collection-icon-gallery");
break;
case a.Squarespace.CollectionOrdering.CHRONOLOGICAL:d.push("collection-icon-blog");
break;
case a.Squarespace.CollectionOrdering.CALENDAR:d.push("collection-icon-calendar");
break;
default:d.push("collection-page");
break
}}}}}if(!this.getEnabled()){d.push("collection-disabled")
}return d.join(" ")
},getName:function(){return this.getTitle()
},getDialogHeight:function(){return 345
},getEmptyText:function(){return"This "+this.getName().toLowerCase()+" contains no items.  Click here to add your first item."
},getExtendedFields:function(){return[]
},getEditableParams:function(){var d={title:this.params.title,navigationTitle:this.params.navigationTitle,mainImage:this.getMainImage(),description:this.params.description,password:this.params.encryptedPassword,urlId:this.params.urlId,pageSize:this.getPageSize()||this.getModelPageSize(),folder:this.isFolder(),dropdown:this.getDropdown(),folderBehavior:this.getFolderBehavior(),folderOverviewCollectionId:this.getFolderOverviewCollectionId(),postByEmailAddress:this.getPostByEmailAddress(),headerInjectCode:this.params.headerInjectCode,postItemInjectCode:this.params.postItemInjectCode,rssFeedReplacementUrl:this.params.rssFeedReplacementUrl,iTunesEnabled:this.params.iTunesEnabled,iTunesAuthor:this.params.iTunesAuthor,iTunesSubtitle:this.params.iTunesSubtitle,iTunesSummary:this.params.iTunesSummary,iTunesKeywords:this.params.iTunesKeywords,iTunesCategories:this.params.iTunesCategories,iTunesOwner:this.params.iTunesOwner,iTunesOwnerEmail:this.params.iTunesOwnerEmail,iTunesImage:this.getiTunesImage(),iTunesExplicit:this.params.iTunesExplicit,typeName:this.params.typeName,regionName:this.params.regionName};
var c=this.getExtendedEditableParams();
for(var b in c){d[b]=c[b]
}return d
},getExtendedEditableParams:function(){var c={};
var b=this.getConfiguration();
if(b.flickrConnect){c.flickrConnect=b.flickrConnect
}return c
},setEditableParams:function(b){this.params.title=b.title;
this.params.navigationTitle=b.navigationTitle;
this.params.description=b.description;
this.params.urlId=b.urlId;
this.params.encryptedPassword=b.password;
this.params.mainImageId=b.mainImage?b.mainImage.get("id"):null;
this.params.typeName=b.typeName||this.params.typeName;
this.params.regionName=b.regionName||this.params.regionName;
this.params.pageSize=b.pageSize;
this.params.headerInjectCode=b.headerInjectCode;
this.params.postItemInjectCode=b.postItemInjectCode;
this.params.rssFeedReplacementUrl=b.rssFeedReplacementUrl;
this.params.iTunesEnabled=b.iTunesEnabled;
this.params.iTunesAuthor=b.iTunesAuthor;
this.params.iTunesSubtitle=b.iTunesSubtitle;
this.params.iTunesSummary=b.iTunesSummary;
this.params.iTunesKeywords=b.iTunesKeywords;
this.params.iTunesCategories=b.iTunesCategories;
this.params.iTunesOwner=b.iTunesOwner;
this.params.iTunesOwnerEmail=b.iTunesOwnerEmail;
this.params.iTunesImageId=b.iTunesImage?b.iTunesImage.get("id"):null;
this.params.iTunesExplicit=b.iTunesExplicit;
if(b.folder){this.params.dropdown=b.dropdown;
this.params.folderOverviewCollectionId=b.folderOverviewCollectionId;
this.params.folderBehavior=b.folderBehavior
}this.setExtendedEditableParams(b)
},setExtendedEditableParams:function(c){var b=this.getConfiguration();
if(c.flickrConnect){b.flickrConnect=c.flickrConnect
}this.setConfiguration(b)
},getSecondaryTabs:function(){var b=this.getTypeName();
var d={tabTitle:"Advanced",fields:[]};
var c=[d];
if(b!=="page"){d.fields.push({type:"description",title:"Manage Tags/Categories",text:"You can use these controls to bulk edit the tags and categories that apply to this collection."});
d.fields.push({type:"tagcloud",name:"tagcloud",title:"Tags",maxtaglength:a.Squarespace.MaxTagLength,collectionId:this.getId(),mode:"tag"});
d.fields.push({type:"tagcloud",name:"tagcloud",title:"Categories",maxtaglength:a.Squarespace.MaxCategoryLength,collectionId:this.getId(),mode:"category"})
}d.fields.push({type:"description",title:"Page Header Code Injection",text:"Enter the code that will be injected onto the header for this page."});
d.fields.push({type:"htmlCode",name:"headerInjectCode"});
if(this.getType()!=a.Squarespace.CollectionTypes.PRODUCT&&this.getOrdering()==a.Squarespace.CollectionOrdering.CHRONOLOGICAL){d.fields.push({type:"description",title:"Post Blog Item Code Injection",text:"Enter the code that will be injected onto the page immediately after each blog content block (but before the blog post's footer block, if any).  You can use the <strong>{permalink}</strong> variable to access the permalink for each item."});
d.fields.push({type:"htmlCode",name:"postItemInjectCode"})
}if(b!=="page"&&a.Squarespace.Utils.isBetaFeatureEnabled()){d.fields.push({type:"description",title:"Post Migration (Admin Only)",text:"Use this button to migrate from beta post types to production post types."});
d.fields.push({type:"button",alignment:"left",text:"Migrate Media Posts to Text Posts",name:"addAccount",onclick:function(){a.Data.post({url:"/api/commondata/MigrateMediaPosts",data:{collectionId:this.getId()},success:function(){new a.Squarespace.Information({}).show("Migration Complete","The content has been migrated, reload to view.")
}})
},context:this})
}if(this.getType()!=a.Squarespace.CollectionTypes.PRODUCT&&this.getOrdering()==a.Squarespace.CollectionOrdering.CHRONOLOGICAL){c.push({tabTitle:"Syndication",name:"syndication",fields:[{type:"text",name:"rssFeedReplacementUrl",maxlength:300,title:"RSS Feed Replacement URL",description:"An alternative feed (eg. Feedburner) that will be served for this collection.",titleStyle:"top"},{type:"check",name:"iTunesEnabled",title:"Enable iTunes RSS Tags",description:"This will allow you to specify iTunes specific RSS tags."},{type:"description",name:"iTunesDescription",title:"iTunes / Podcasting Setup",text:"Squarespace includes full support for podcasting and syndicating your shows to iTunes.  Fill in the tags below to augment your RSS feed with the information required to be listed in the iTunes directory.  After you have filled out the fields below, adding a Audio block to any of your posts will automatically attach it as a podcast."},{type:"text",name:"iTunesAuthor",maxlength:100,title:"iTunes Author",description:"The author of this podcast.",titleStyle:"top",style:"major"},{type:"text",name:"iTunesSubtitle",maxlength:300,title:"iTunes Subtitle",description:"A brief description of your show.",titleStyle:"top"},{type:"text",name:"iTunesSummary",maxlength:4000,title:"iTunes Summary",description:"When the 'i' information icon is clicked, more detailed information about your show in iTunes.",titleStyle:"top"},{type:"text",name:"iTunesKeywords",maxlength:100,title:"iTunes Search Keywords",description:"A comma delimited list of keywords describing your podcast.  Not visible in the iTunes interface, but assists when your show is searched for.",titleStyle:"top"},{type:"text",name:"iTunesCategories",maxlength:100,title:"iTunes Category",description:"Shown in the category column and in iTunes Store Browse.",titleStyle:"top"},{type:"splitter",fields:[{type:"text",width:0.5,name:"iTunesOwner",maxlength:100,title:"iTunes Owner",description:"The owner of this podcast.  Not visible in the iTunes interface.",titleStyle:"top"},{type:"text",width:0.5,name:"iTunesOwnerEmail",maxlength:100,title:"iTunes Owner Email",description:"The owner email for this podcast.  Not visible in the iTunes interface.",titleStyle:"top"}]},{ctor:a.Squarespace.DialogFileImage,contentType:"image",source:"item",noFocalPoint:true,name:"iTunesImage",transientStore:true,height:250,square:true,contentLabel:"cover art image",strings:{title:"iTunes Cover Art Image",description:""}},{type:"description",name:"iTunesImageDescription",text:"Add an iTunes cover art image. iTunes prefers square .jpg images that are at least 1400x1400 pixels formatted as a .jpg file.",width:224},{type:"check",name:"iTunesExplicit",title:"Explicit Content",description:"Your show contains explicit content."}]})
}return c
},toJSON:function(){return this.params
}});
a.Squarespace.CollectionModels={};
a.Squarespace.Navigations=Singleton.create({ready:function(){this.navigations=[];
this.folders=[]
},asArray:function(){return this.navigations
},get:function(c){if(c==a.Squarespace.Constants.hiddenNavigationName){return this.getHidden()
}for(var d=0;
d<this.navigations.length;
d++){if(this.navigations[d].getName()==c){return this.navigations[d]
}}for(var b=0;
b<this.folders.length;
b++){if(this.folders[b].getName()==c){return this.folders[b]
}}return null
},add:function(b){this.navigations.push(b)
},addFolder:function(b){b.getParentItem().on("remove",function(){this.folders.remove(b)
},this);
this.folders.push(b)
},isCollectionInNavigation:function(c){if(!a.Lang.isString(c)){c=c.getId()
}var b=false;
a.Array.each(this.navigations,function(d){a.Array.each(d.getItems(),function(e){if(e.getCollectionId()==c){b=true
}})
},this);
a.Array.each(this.folders,function(d){a.Array.each(d.getItems(),function(e){if(e.getCollectionId()==c){b=true
}})
});
return b
},getAllNavigationItems:function(){var b=this.navigations.concat(this.getHidden());
return a.Array.reduce(b,[],function(c,d){return c.concat(this._getAllNavigationItems(d))
},this)
},_getAllNavigationItems:function(b){var c=function(e){if(e.getType()===e.types.FOLDER){var d=e.getFolderNavigation();
return this._getAllNavigationItems(d)
}else{return[]
}};
return a.Array.reduce(b.getItems(),[],function(e,d){console.log(d);
return e.concat(d).concat(c.call(this,d))
},this)
},setHidden:function(b){this._hidden=b;
this.getHidden()
},getHidden:function(){if(!this._hidden){this._hidden=new a.Squarespace.Navigation({name:a.Squarespace.Constants.hiddenNavigationName,title:"Not Linked",navigationData:{items:[]}});
var c=Static.SQUARESPACE_CONTEXT.hiddenNavigation;
if(!!c){for(var b=0;
b<c.items.length;
b++){var g=c.items[b].collectionId;
if((g&&this.isCollectionInNavigation(g))||this._hidden.has("collectionId",g)){continue
}var f=new a.Squarespace.NavigationItem(c.items[b]);
this._hidden.addItem(f,null,true)
}}}var e=a.Squarespace.Library.getCollections();
for(var g in e){var h=e[g];
if([a.Squarespace.CollectionTypes.SUBSCRIPTION,a.Squarespace.CollectionTypes.TWITTER,a.Squarespace.CollectionTypes.FOURSQUARE,a.Squarespace.CollectionTypes.INSTAGRAM,a.Squarespace.CollectionTypes.FIVEHUNDREDPIX,a.Squarespace.CollectionTypes.FLICKR,a.Squarespace.CollectionTypes.GALLERY_BLOCK].indexOf(h.getType())>=0){continue
}if(h.getType()==a.Squarespace.CollectionTypes.TEMPLATE_PAGE&&h.getTypeName()==a.Squarespace.Constants.README_PAGE_NAME){a.Squarespace.Library.setReadmeCollection(h);
if(Static.SQUARESPACE_CONTEXT.templateCapabilities.readmeHidden){var d=this._hidden.getItem("collectionId",g);
if(d){this._hidden.removeItem(d)
}continue
}}if(!this.isCollectionInNavigation(g)&&!this._hidden.has("collectionId",g)){var f=new a.Squarespace.NavigationItem({collectionId:g});
this._hidden.addItem(f,null,true)
}}return this._hidden
}});
a.Squarespace.Model=Class.create({_name:"Model",initialize:function(d){if(this.properties){for(var c in this.properties){var b=this.properties[c].title||c.charAt(0).toUpperCase()+c.slice(1);
this["set"+b]=(function(e){return function(f){this._set(e,f)
}
})(c);
this["get"+b]=(function(e){return function(){return this._get(e)
}
})(c)
}}this.params={};
this.data=d||{}
},_get:function(e,c){var b=function(f){return c[f]
};
c=c||this.data;
var d=e.split(".");
if(d.length>1){return this._get(e.substr(d[0].length+1),b(e.substr(0,d[0].length)))
}return b(e)
},_set:function(f,d,c){var b=function(g){return c[g]
};
c=c||this.data;
var e=f.split(".");
if(e.length>1){this._set(f.substr(e[0].length+1),d,b(f.substr(0,e[0].length)))
}c[f]=d
},save:function(b){a.Data.post({url:b,data:this.toJSON(),success:function(c){this.fire("saved",c)
},error:function(c){this.fire("save-error",c)
}},this)
},toJSON:function(){return this.data
}});
a.augment(a.Squarespace.Model,a.EventTarget);
a.Squarespace.Navigation=Class.extend(a.Squarespace.Model,{_name:"Navigation",properties:{index:{}},initialize:function(d){if(d.navigationData&&d.navigationData.items){var b=[];
while(d.navigationData.items.length){var c=d.navigationData.items[0];
d.navigationData.items.splice(d.navigationData.items.indexOf(c),1);
if(c.collectionId&&!a.Squarespace.Library.getCollection(c.collectionId)){continue
}b.push(c)
}d.navigationData.items=b
}this._super(d);
if(!this.data.navigationData||!this.data.navigationData.items){this.data.navigationData={items:[]}
}},isFolderNavigation:function(){return false
},getTitle:function(){return this._get("title")
},getName:function(){return this._get("name")
},getItems:function(){return this._get("navigationData.items")
},addItem:function(d,c,b){if(!this._validateItem(d)){console.warn("Not a valid item, not adding.",["item",d],["index",c],["silent",b]);
return
}if(d.getType()==d.types.FOLDER){d.getFolderNavigation()
}d.setNavigation(this);
if(a.Lang.isNumber(c)){this.getItems().splice(c,0,d)
}else{this.getItems().push(d)
}if(!b){this.fire("add-item",d)
}},removeItem:function(b){var c=this.getItems().indexOf(b);
if(c>-1){this.getItems().removeAt(c);
this.fire("remove-item",b)
}},_validateItem:function(b){if(b._get("collectionId")){return !!b.getCollection()
}return true
},moveItem:function(e,d){var c=this.data.navigationData.items;
var b=c.indexOf(e);
c.splice(d,0,c.splice(b,1)[0])
},save:function(){this._super("/api/widget/UpdateNavigation")
},toJSON:function(e){var d=[];
var b=this._get("navigationData.items");
for(var c=0;
c<b.length;
c++){d.push(b[c].toJSON(e))
}return{fieldName:this.getName(),navigation:{items:d}}
},has:function(c,b){return !!this.getItem(c,b)
},getItem:function(f,e){var c=this.getItems();
for(var d=0;
d<c.length;
d++){var b=c[d]._get(f);
if(b&&b==e){return c[d]
}}return null
}});
a.Squarespace.NavigationFolder=Class.extend(a.Squarespace.Navigation,{setParentItem:function(b){this._item=b
},getParentItem:function(b){return this._item
},save:function(){this._item.once("saved",function(){this.fire("saved")
},this);
this._item.save()
},isFolderNavigation:function(){return true
},getCollections:function(){var b=this.getItems();
var d=[];
for(var c=0;
c<b.length;
c++){if(b[c].getType()==b[c].types.COLLECTION){d.push(b[c].getCollection())
}}return d
}});
a.Squarespace.NavigationItem=Class.extend(a.Squarespace.Model,{_name:"NavigationItem",types:{COLLECTION:0,EXTERNAL_LINK:1,FOLDER:2,TEMPLATE_PAGE:3},initialize:function(b){this._super(b)
},isTemplatePage:function(){return
},getType:function(){if(!this.type){if(this._get("collectionId")){if(this.getCollection().isFolder()||(this.getCollection().getModel()&&this.getCollection().getModel().isFolder())){this.type=this.types.FOLDER
}else{if(this.getCollection().getType()==a.Squarespace.CollectionTypes.TEMPLATE_PAGE){this.type=this.types.TEMPLATE_PAGE
}else{this.type=this.types.COLLECTION
}}}if(this._get("externalLink")){this.type=this.types.EXTERNAL_LINK
}}return this.type
},getCollection:function(){if(!this.collection){this.collection=a.Squarespace.Library.getCollection(this.getCollectionId())
}return this.collection
},getExternalLink:function(){return this._get("externalLink")
},getCollectionId:function(){return this._get("collectionId")
},getNavigation:function(){return this.params.navigation
},setNavigation:function(b){this.params.navigation=b
},move:function(c,b){this.remove(this);
c.addItem(this,b,true)
},reorder:function(b){this.getNavigation().moveItem(this,b)
},remove:function(){this.getNavigation().once("remove-item",function(){this.fire("remove")
},this);
this.getNavigation().removeItem(this)
},save:function(){this.getNavigation().once("saved",function(){this.fire("saved")
},this);
this.getNavigation().save()
},getFolderNavigation:function(){if(!this._folderNavigation){this._folderNavigation=new a.Squarespace.NavigationFolder({name:this.getCollection().getUrlId(),title:this.getCollection().getName()});
var b=this._get("items");
if(b){for(var d=0;
d<b.length;
d++){var c=new a.Squarespace.NavigationItem(b[d]);
this._folderNavigation.addItem(c)
}}this._folderNavigation.setParentItem(this);
a.Squarespace.Navigations.addFolder(this._folderNavigation)
}return this._folderNavigation
},toJSON:function(b){if(b&&[this.types.FOLDER,this.types.COLLECTION].indexOf(this.getType())>=0){this.data.collection=this.getCollection().toJSON()
}if(this.getType()==this.types.FOLDER){this.data.items=this.getFolderNavigation().toJSON(b).navigation.items;
return this.data
}return this.data
}});
a.Squarespace.EditableProxy=Class.create({initialize:function(b){if(!b.proxy){throw"Need a proxy"
}this.proxy=b.proxy
},getProxy:function(){return this.proxy
},getEditableParams:function(){throw"Get Editable Params not implemented"
},setEditableParams:function(){throw"Set Editable Params not implemented"
},save:function(){throw"Save not implemented"
}});
a.augment(a.Squarespace.EditableProxy,a.EventTarget);
a.Squarespace.EditableNavigationItemProxy=Class.extend(a.Squarespace.EditableProxy,{_name:"EditableNavigationItem",getEditableParams:function(){if(this.proxy.getType()==this.proxy.types.EXTERNAL_LINK){var b=this.proxy.getExternalLink();
b.createLink={url:b.url,newWindow:b.newWindow};
return b
}},setEditableParams:function(d){if(this.proxy.getType()==this.proxy.types.EXTERNAL_LINK){var b=d.createLink;
var c={title:d.title,url:b.url,newWindow:b.newWindow};
this.proxy._set("externalLink",c)
}},save:function(){this.proxy.once("saved",function(){this.fire("save")
},this);
this.proxy.save()
}});
a.Squarespace.RevisionManager=Singleton.create({ready:function(){if(!a.StorageLite.getItem("revisions",true)){a.StorageLite.setItem("revisions",{},true)
}},addRevision:function(b,c){if(!a.Cookie.get("SQUARESPACE_DEBUG")){return
}},getRevisions:function(b){return a.StorageLite.getItem("revisions",true)[b]
}});
a.Squarespace.CollectionContentData=Class.create({initialize:function(b){this.params={data:b};
this.updatedOn=b.updatedOn
},getId:function(){return this.params.id
},setId:function(b){this.params.id=b
},getParentId:function(){return this.params.parentId
},setParentId:function(b){this.params.parentId=b
},getData:function(){return this.params.data
},setData:function(b){this.params.data=a.clone(b)
},getUpdatedOn:function(){return this.updatedOn
},setUpdatedOn:function(b){this.updatedOn=b
},setEditableParams:function(b){this.setData(a.clone(b.body))
},save:function(){if(!a.Squarespace.Library.getCollection(this.getParentId())||a.Squarespace.Library.getCollection(this.getParentId()).isRemoved()){return
}a.Squarespace.RevisionManager.addRevision("contentdata-"+this.getParentId(),this.getData());
if(!this.saveManager){this.saveManager=new a.Squarespace.SaveManager(this)
}this.saveManager.save({url:"/api/commondata/UpdateCollectionData",data:{collectionId:this.getParentId(),data:this.getData(),updatedOn:this.getUpdatedOn()},success:function(b){this.setUpdatedOn(b.updatedOn);
this.fire("saved")
},failure:function(b){this.fire("saved-failed",b.error)
},loginHasPriorityOnFailure:true})
}});
a.Squarespace.Item=Class.extend(a.Squarespace.Model,{_name:"Item",initialize:function(c,b){this._super(b||{});
this.collection=c;
if(!this.data.publishOn||!this.data.workflowState||this.data.workflowState==a.Squarespace.WorkflowStates.DRAFT){this.data.publishOn=new Date().getTime()
}if(this.data.addedOn){this.data.addedOn=new Date(this.data.addedOn)
}if(this.data.updatedOn){this.data.updatedOn=new Date(this.data.updatedOn)
}if(!this.data.customContent){this.data.customContent={}
}this._new=(this.data.id===null);
this.saveManager=new a.Squarespace.SaveManager(this);
if(!b){this._newPostSetup()
}},_newPostSetup:function(){if(!!Static.SQUARESPACE_CONTEXT.websiteSettings.commentDisableAfterDaysDefault){var b=new Date();
b.setDate(b.getDate()+Static.SQUARESPACE_CONTEXT.websiteSettings.commentDisableAfterDaysDefault);
this.data.commentDisableOn=b.getTime()
}if(!Static.SQUARESPACE_CONTEXT.websiteSettings.commentEnableByDefault||!Static.SQUARESPACE_CONTEXT.websiteSettings.commentsEnabled){this.setCommentState(a.Squarespace.CommentStates.DISABLED)
}this.setPushedServices([])
},getCollection:function(){return this.collection
},getData:function(){return this.data
},getId:function(){return this.data.id
},getCollectionId:function(){return this.data.collectionId
},getRecordType:function(){return this.data.recordType
},getRecordTypeLabel:function(){return a.Squarespace.ContentConstantsString[this.getRecordType()]
},getProcessing:function(){return this.data.mediaProcessingState
},getFilename:function(){return this.data.filename
},isDefault:function(){return !!this.data.proxyForId
},getUrl:function(){return"/"+this.collection.getUrlId()+"/"+this.getUrlId()
},getAssetUrl:function(b){var c={};
if(b){c.format=b
}c.r=(this.getUpdatedOn()||new Date()).getTime();
return this.data.assetUrl+"?"+a.QueryString.stringify(c)
},getUrlId:function(){return this.data.urlId
},setUrlId:function(b){this.data.urlId=b
},getTitle:function(){return this.data.title
},setTitle:function(b){this.data.title=b
},getBody:function(){return this.data.body
},setBody:function(b){this.data.body=b
},getDescription:function(){return this.data.description
},setDescription:function(b){this.data.description=b
},getExcerpt:function(){return this.data.excerpt
},setExcerpt:function(b){this.data.excerpt=b
},getStarred:function(){return this.data.starred
},setStarred:function(b){this.data.starred=b
},getPassthrough:function(){return this.data.passthrough
},setPassthrough:function(b){this.data.passthrough=b
},getAddedOn:function(){return this.data.addedOn||new Date()
},setAddedOn:function(b){this.data.addedOn=b
},getCommentCount:function(){return this.data.commentCount
},setCommentCount:function(b){this.data.commentCount=b
},getCommentState:function(){return this.data.commentState
},setCommentState:function(b){this.data.commentState=b
},getCommentDisableOn:function(){return this.data.commentDisableOn
},setCommentDisableOn:function(b){this.data.commentDisableOn=b
},getUpdatedOn:function(){return this.data.updatedOn
},setUpdatedOn:function(b){this.data.updatedOn=b
},getUnsaved:function(){return this.data.unsaved
},setUnsaved:function(b){this.data.unsaved=b
},getDisplayIndex:function(){return this.data.displayIndex
},setDisplayIndex:function(b){this.data.displayIndex=b
},getSystemDataId:function(){return this.data.systemDataId
},setSystemDataId:function(b){this.data.systemDataId=b
},getSystemDataOrigin:function(){return this.data.systemDataOrigin
},setSystemDataOrigin:function(b){this.data.systemDataOrigin=b
},hasImage:function(){return this.data.contentType.indexOf("image")===0||!!this.data.systemDataId
},getWorkflow:function(){return this.data.workflowState
},setWorkflow:function(b){this.data.workflowState=b
},getPublishOn:function(){return this.data.publishOn
},setPublishOn:function(b){this.data.publishOn=b
},getMediaFocalPoint:function(){return this.data.mediaFocalPoint||{x:0.5,y:0.5}
},setMediaFocalPoint:function(b){this.data.mediaFocalPoint=b
},getMediaProcessingState:function(){return this.data.mediaProcessingState
},getLocation:function(){return this.data.location
},setLocation:function(b){this.data.location=b
},getShareStates:function(){return this.data.shareStates||[]
},setShareStates:function(b){this.data.shareStates=b
},getPushedServices:function(){return this.data.pushedServices
},setPushedServices:function(b){this.data.pushedServices=b
},getWorkflowLabel:function(){if(this.getUnsaved()){return"Unsaved"
}else{if(this.getWorkflow()==a.Squarespace.WorkflowStates.PUBLISHED){return""
}if(this.getWorkflow()==a.Squarespace.WorkflowStates.SCHEDULED){return"Scheduled"
}if(this.getWorkflow()==a.Squarespace.WorkflowStates.NEEDS_REVIEW){return"Needs Review"
}if(this.getWorkflow()==a.Squarespace.WorkflowStates.DRAFT){return"Draft"
}return"Draft"
}},getWorkflowStateIdentifier:function(){if(this.getWorkflow()==a.Squarespace.WorkflowStates.PUBLISHED){return"published"
}if(this.getWorkflow()==a.Squarespace.WorkflowStates.SCHEDULED){return"scheduled"
}if(this.getWorkflow()==a.Squarespace.WorkflowStates.NEEDS_REVIEW){return"needsreview"
}if(this.getWorkflow()==a.Squarespace.WorkflowStates.DRAFT){return"draft"
}return"draft"
},getCommentStateIdentifier:function(){if(this.getCommentState()==a.Squarespace.CommentStates.DISABLED){return"disable"
}if(this.getCommentState()==a.Squarespace.CommentStates.ENABLED){return"allow"
}return"allow"
},getAuthorId:function(){return this.data.authorId
},setAuthorId:function(b){this.data.authorId=b
},getTags:function(){return this.data.tags||null
},setTags:function(b){this.data.tags=b
},getAuthor:function(){return this.data.author
},setAuthor:function(b){this.data.author=b
},getCategories:function(){return this.data.categories||null
},setCategories:function(b){this.data.categories=b
},getDataField:function(b){return this.data[b]
},setDataField:function(c,b){if(a.Lang.isUndefined(b)||a.Lang.isNull(b)){delete this.data[c]
}else{this.data[c]=b
}},clearDataField:function(b){delete this.data[b]
},getCustomContent:function(){return this.data.customContent
},setCustomContent:function(b){this.data.customContent=b
},getCustomContentType:function(){if(this.data.customContent){if(a.Lang.isObject(this.data.customContent.customType)){return this.data.customContent.customType.name
}else{return this.data.customContent.customType
}}return null
},setCustomContentType:function(b){this.data.customContent.customType=b
},getCustomField:function(b){return this.data.customContent[b]
},setCustomField:function(c,b){this.data.customContent[c]=b
},clearCustomField:function(b){delete this.data.customContent[b]
},getChildren:function(){return this.data.items
},getChildGroup:function(b){return this.data[b]
},getParentId:function(){return this.data.parentId
},getNextDisplayIndex:function(){if(!this.getChildren()||!this.getChildren().length){return 0
}return this.getChildren()[this.getChildren().length-1].displayIndex+1
},touch:function(){this.params.updatedOn=new Date().getTime()
},updatePosition:function(b){if(this.getDisplayIndex()==b){return
}var c=this.getDisplayIndex();
this.setDisplayIndex(b);
var d={itemId:this.getId(),newPosition:b};
if(this.getParentId()){d.parentId=this.getParentId()
}else{d.collectionId=this.getCollection().getId()
}a.Data.post({url:"/api/commondata/SwapItems",data:d,success:function(e){this.fire("items-swapped");
this.getCollection().fire("items-swapped");
if(c===0||b===0){this.getCollection().reset()
}}},this);
this.fire("update-position",b)
},saveField:function(c){var b={field:c,itemId:this.getId(),value:this.data[c]};
this.saveManager.save({url:"/api/commondata/SaveItemField",data:b})
},save:function(b){if(typeof this.getDisplayIndex()==="undefined"&&this.getCollection()){this.setDisplayIndex(this.getCollection().getNextDisplayIndex())
}if(!this.data.mediaFocalPoint){delete this.data.mediaFocalPoint
}var c=a.bind(function(){var d={id:this.data.id,collectionId:this.getCollectionId(),recordType:this.getRecordType(),recordTypeLabel:this.getRecordTypeLabel(),urlId:this.getUrlId(),title:this.getTitle(),unsaved:this.getUnsaved(),displayIndex:this.getDisplayIndex(),addedOn:this.getAddedOn().getTime(),workflowState:this.getWorkflow(),publishOn:this.getPublishOn(),authorId:this.getAuthorId(),customContent:this.getCustomContent(),body:this.data.body,excerpt:this.data.excerpt,starred:this.getStarred(),passthrough:this.getPassthrough(),sourceUrl:this.data.sourceUrl,clickthroughUrl:this.data.clickthroughUrl,commentState:this.getCommentState(),commentDisableOn:this.getCommentDisableOn(),autoSave:b,mediaFocalPoint:this.getMediaFocalPoint(),location:this.getLocation(),shareStates:a.JSON.stringify(this.getShareStates())};
if(this.data.tags){d.tags=this.data.tags
}if(this.data.categories){d.categories=this.data.categories
}this.getItemSpecificFields(d);
return d
},this);
a.Squarespace.RevisionManager.addRevision("item-"+this.getId(),c());
this.saveManager.save({url:"/api/commondata/SaveItem",buildData:c,success:function(d){this.data.id=d.id;
this.data.urlId=d.urlId;
this.data.assetUrl=d.assetUrl;
this.data.systemDataId=d.systemDataId;
this.data.systemDataOrigin=d.item.systemDataOrigin;
this.data.updatedOn=new Date(d.updatedOn);
this.fire("save",{newItem:this._new,autoSave:b})
},loginHasPriorityOnFailure:true,failure:function(d){if(!b&&this._editorInstance){this._editorInstance.showErrors(d.errors)
}}})
},remove:function(){this.fire("removing");
if(this.collection){this.collection._removeItem(this);
this.collection.once("items-removed",function(){this.fire("remove")
},this);
this.collection.removeItems([this])
}else{if(this.getId()){a.Data.post({url:"/api/commondata/RemoveItems",data:{items:[this.getId()]},success:function(b){this.fire("remove")
}},this)
}else{this.fire("remove")
}}},get:function(b){return this._get(b)
},getItemSpecificFields:function(c){c=c||{};
var b=a.Squarespace.ItemSpecificFields[this.getRecordType()];
a.Array.each(b,function(e){var d=this.getDataField(e);
c[e]=d
},this);
return c
},setItemSpecificFields:function(c){var b=a.Squarespace.ItemSpecificFields[this.getType()];
a.Array.each(b,function(d){if(c[d]!==undefined){this.setDataField(d,c[d])
}},this)
},reset:function(){a.Data.get({url:"/api/commondata/GetItem",data:{itemId:this.getId()},success:function(b){this.data=b.item
}},this)
}});
a.Squarespace.ItemSpecificFields={};
a.Squarespace.ItemSpecificFields[a.Squarespace.ContentConstants.IMAGE]=["clickthroughUrl"];
a.Squarespace.ItemSpecificFields[a.Squarespace.ContentConstants.LINK]=["url"];
a.Squarespace.ItemSpecificFields[a.Squarespace.ContentConstants.QUOTE]=["quote"];
a.Squarespace.ItemSpecificFields[a.Squarespace.ContentConstants.CHAT]=["chat"];
a.Squarespace.ItemSpecificFields[a.Squarespace.ContentConstants.VIDEO]=["oembed","overlay"];
a.Squarespace.ItemSpecificFields[a.Squarespace.ContentConstants.AUDO]=["audioFile"];
a.Squarespace.ItemSpecificFields[a.Squarespace.ContentConstants.EVENT]=["startDate","endDate"];
a.Squarespace.ItemSpecificFields[a.Squarespace.ContentConstants.REVIEW]=["clickthroughUrl","asin","rating"];
a.Squarespace.ItemSpecificFields[a.Squarespace.ContentConstants.STORE_ITEM]=["priceCents","extraShippingCost","weight","salePriceCents","onSale","productType","vendor","variants","payWhatYouWant","minimumPriceCents","suggestedPrices"];
a.augment(a.Squarespace.Collection,a.EventTarget);
a.augment(a.Squarespace.CollectionContentData,a.EventTarget);
a.augment(a.Squarespace.Item,a.EventTarget);
a.Squarespace.CollectionLibrary={};
a.Squarespace.CollectionLibraryTypesByModule={};
a.Squarespace.PostTypes={};
a.Squarespace.CollectionLibrarySectionNames={};
a.Squarespace.CollectionLibrarySectionNames[a.Squarespace.CollectionTypes.FORUM]="Forums";
a.Squarespace.CollectionLibrarySectionNames[a.Squarespace.CollectionTypes.GALLERY]="Galleries";
a.Squarespace.CollectionLibrarySectionNames[a.Squarespace.CollectionTypes.JOURNAL]="Blogs";
a.Squarespace.CollectionLibrarySectionNames[a.Squarespace.CollectionTypes.PAGE]="Pages";
a.Squarespace.EditableImageItem=Class.extend(a.Squarespace.Item,{_name:"EditableImageItem",getEditableParams:function(){return{title:this.getTitle(),body:this.getDataField("body"),tags:this.getTags(),urlId:this.getUrlId(),mediaFocalPoint:this.getMediaFocalPoint(),clickthroughUrl:this.getDataField("clickthroughUrl")}
},setEditableParams:function(b){this.setTitle(b.title);
this.setTags(b.tags);
this.setUrlId(b.urlId);
this.setCategories(null);
this.setWorkflow(a.Squarespace.WorkflowStates.PUBLISHED);
this.setDataField("body",b.body);
this.setMediaFocalPoint(b.mediaFocalPoint);
this.setDataField("clickthroughUrl",b.clickthroughUrl)
},getPresentationName:function(){return"Image"
},getUnsaved:function(){return this.unsaved
},setUnsaved:function(b){this.unsaved=b
},updatePosition:function(b){this._super(b);
this.fire("updatePosition",b)
}});
a.Squarespace.Library=Singleton.create({defaultParams:{pageSize:20},ready:function(b){this.params=a.merge(this.defaultParams,b);
this._debug=new a.Squarespace.Debugger({name:"Library",output:true});
this.unsupportedCollectionModel=new a.Squarespace.CollectionModel({type:null,typeName:"unsupported",title:"Unsupported Collection",ordering:null})
},_afterLibraryReady:function(){if(Static.SQUARESPACE_CONTEXT.collectionsById){this.wrapCollectionData()
}else{if(!Static.IN_SUPPORT&&a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_CONTENT_MANAGER)){this.refreshCollections()
}}if(!Static.IN_SUPPORT&&Static.SQUARESPACE_CONTEXT.templateCapabilities){this.wrapNavigationData()
}},setHomepageCollection:function(b){a.Data.post({url:"/api/template/SetHomepageCollection",data:{collectionId:b.getId()},success:function(){if(Static.SQUARESPACE_CONTEXT.homepageCollectionId){var c=this.getCollection(Static.SQUARESPACE_CONTEXT.homepageCollectionId);
if(c){c.fire("homepage-remove")
}}b.fire("homepage-add");
Static.SQUARESPACE_CONTEXT.homepageCollectionId=b.getId();
this.fire("homepage-changed")
}},this)
},getHomepageCollectionId:function(){return Static.SQUARESPACE_CONTEXT.homepageCollectionId||null
},getPageSize:function(){return this.params.pageSize
},getWidgetSchemas:function(b){var c=Static.SQUARESPACE_CONTEXT.templateCapabilities.widgetSchemas;
if(b){return c[b]
}else{return c
}},getWidgetConfiguration:function(b,d){var f=this.getWidgetSchemas(d);
if(f){for(var c=0;
c<f.length;
c++){var e=f[c];
if(e.schemaName==b){return e
}}}},getTemplatePageConfiguration:function(b){var c=Static.SQUARESPACE_CONTEXT.templateCapabilities.templatePageConfigs;
return(c!=null?c[b]:null)
},getNavigations:function(){return a.Squarespace.Navigations
},moveItems:function(e){var d=e.collectionId;
var c=e.items;
var b=e.fromCollection;
if(!d){throw new Error("No 'collectionId' supplied.")
}if(!c){throw new Error("No 'items' supplied.")
}a.Data.post({url:"/api/commondata/MoveItems",data:{toCollectionId:d,items:c},success:function(){this.fire("moved-items");
if(b){b.reset()
}}},this)
},contentLibraryAllowedContentTypes:[a.Squarespace.CollectionTypes.GALLERY,a.Squarespace.CollectionTypes.JOURNAL,a.Squarespace.CollectionTypes.PAGE,a.Squarespace.CollectionTypes.PROJECTS,a.Squarespace.CollectionTypes.FORUM,a.Squarespace.CollectionTypes.ALBUM,a.Squarespace.CollectionTypes.TWITTER,a.Squarespace.CollectionTypes.INSTAGRAM,a.Squarespace.CollectionTypes.FOURSQUARE],getCollectionsByType:function(c){var b=this.getCollectionTypes();
var d=this.getCollections();
var e=[];
for(var g in d){var f=d[g];
if(f.getType()==a.Squarespace.CollectionTypes.TEMPLATE_PAGE){f.setModel(this.templatePageCollectionModel)
}if(!f.getTypeName()){this._debug.log("Collection missing typeName, marking as unsupported:",f.getTitle(),f.params);
e.push(f);
continue
}if(!b[f.getTypeName()]){this._debug.log("Missing collection model, marking as unsupported:",f.getTitle(),"("+f.getTypeName()+")");
e.push(f);
continue
}if(b[f.getTypeName()].getContentType()!=f.getContentType()){this._debug.log("Weird, the typenames match, but the content types don't, marking as unsupported:",f.getTitle(),"("+f.getContentType()+")");
e.push(f);
continue
}b[f.getTypeName()].addItem(f)
}if(b&&b["gallery-block"]){delete b["gallery-block"]
}this._collectionsByType={supportedTypes:b,unsupportedTypes:e};
if(c){return b[c]
}return this._collectionsByType
},getCollection:function(b){return Static.SQUARESPACE_CONTEXT.collectionsById?Static.SQUARESPACE_CONTEXT.collectionsById[b]:null
},getCollectionAsync:function(b,c){b.success=b.success||noop;
b.failure=b.failure||noop;
c=c||this;
a.Data.get({url:"/api/commondata/GetCollection",data:{collectionId:b.id},success:function(f){var e=f;
var d=a.Squarespace.Library.getCollection(b.id);
if(d){d.params=e
}else{if(!Static.SQUARESPACE_CONTEXT.collectionsById){Static.SQUARESPACE_CONTEXT.collectionsById={}
}Static.SQUARESPACE_CONTEXT.collectionsById[b.id]=new a.Squarespace.Collection(e)
}b.success.call(c,f)
},failure:b.failure},c)
},getCollections:function(e){if(e){var d=[];
for(var f in Static.SQUARESPACE_CONTEXT.collectionsById){var b=true;
for(var c in e){b=(Static.SQUARESPACE_CONTEXT.collectionsById[f].params[c]==e[c]);
if(!b){break
}}if(b){d.push(Static.SQUARESPACE_CONTEXT.collectionsById[f])
}}return d
}else{return Static.SQUARESPACE_CONTEXT.collectionsById
}},groupCollectionsByGroupName:function(d){var e={};
for(var c=0;
c<d.length;
c++){var b=d[c].getTypeName();
if(!e[b]){e[b]={title:a.Squarespace.Library.getCollectionType(b).getTitle(),collections:[]}
}e[b].collections.push(d[c])
}return a.Object.values(e)
},getCollectionsByOrdering:function(f){var b=this.getCollections();
var c={};
for(var e in b){var d=b[e];
c[d.getOrdering()]=c[d.getOrdering()]||[];
c[d.getOrdering()].push(d)
}if(f){return c[f]
}else{return c
}},_refreshCollectionsOnNextLoad:false,refreshCollectionsOnNextLoad:function(b){this._refreshCollectionsOnNextLoad=b
},shouldRefreshCollections:function(){return this._refreshCollectionsOnNextLoad
},refreshCollections:function(){a.Data.get({url:"/api/commondata/GetCollections",success:function(d){for(var e in d.collections){var c=d.collections[e];
var b=this.getCollection(e);
if(b){b.params=c
}else{if(!Static.SQUARESPACE_CONTEXT.collectionsById){Static.SQUARESPACE_CONTEXT.collectionsById={}
}Static.SQUARESPACE_CONTEXT.collectionsById[e]=new a.Squarespace.Collection(c)
}}this.fire("collections-refreshed")
}},this)
},getUnsupportedCollectionType:function(){return this.unsupportedCollectionModel
},isBaseType:function(b){return !!a.Squarespace.ContentStringConstants[b]
},getCustomTypes:function(){return a.clone(Static.SQUARESPACE_CONTEXT.templateCapabilities.customTypes)
},getCustomTypeByName:function(c){var b=this.getCustomTypes();
for(var d=0;
d<b.length;
d++){if(b[d].name==c){return b[d]
}}return null
},getCollectionType:function(b){var c=this.getCollectionTypes()[b];
if(!c){return this.getUnsupportedCollectionType()
}else{return c
}},getReadmeCollection:function(){return this._readmeCollection
},setReadmeCollection:function(b){this._readmeCollection=b
},getCollectionTypes:function(e){var c={};
if(e){for(var d in e){var b=new a.Squarespace.CollectionModel(e[d]);
c[b.getCollectionType()]=b
}}else{c=a.clone(a.Squarespace.CollectionModels)
}if(!this.pageCollectionModel){this.pageCollectionModel=new a.Squarespace.CollectionModel({type:a.Squarespace.CollectionTypes.PAGE,typeName:"page",title:"Page",ordering:a.Squarespace.CollectionOrdering.CUSTOM})
}c.page=this.pageCollectionModel;
if(!this.galleryBlockCollectionModel){this.galleryBlockCollectionModel=new a.Squarespace.CollectionModel({type:a.Squarespace.CollectionTypes.GALLERY_BLOCK,typeName:"gallery-block",title:"Gallery Block",ordering:a.Squarespace.CollectionOrdering.USER})
}c["gallery-block"]=this.galleryBlockCollectionModel;
if(!this.productsCollectionModel){this.productsCollectionModel=new a.Squarespace.CollectionModel({type:a.Squarespace.CollectionTypes.PRODUCT,typeName:"products",title:"Products",pageSize:20,ordering:a.Squarespace.CollectionOrdering.CHRONOLOGICAL,acceptTypes:["store_item"],view:a.Squarespace.CollectionView.PRODUCT_TABLE,icon:"products",addText:"Add Product"})
}c.products=this.productsCollectionModel;
if(!this.templatePageCollectionModel){this.templatePageCollectionModel=new a.Squarespace.CollectionModel({type:a.Squarespace.CollectionTypes.TEMPLATE_PAGE,title:"Template Page"})
}if(!this.splashPageCollectionModel){this.splashPageCollectionModel=new a.Squarespace.CollectionModel({type:a.Squarespace.CollectionTypes.SPLASH_PAGE,typeName:"splash-page",title:"Splash Page",ordering:a.Squarespace.CollectionOrdering.CUSTOM})
}c["splash-page"]=this.splashPageCollectionModel;
if(!this.subscriptionCollectionModel){this.subscriptionCollectionModel=new a.Squarespace.CollectionModel({type:a.Squarespace.CollectionTypes.SUBSCRIPTION,typeName:"subscription",title:"Subscription",ordering:a.Squarespace.CollectionOrdering.CHRONOLOGICAL})
}c.subscription=this.subscriptionCollectionModel;
return c
},getCustomCollectionTypes:function(){return Static.SQUARESPACE_CONTEXT.templateCapabilities.pageSchemas
},wrapCollectionData:function(){for(var d in Static.SQUARESPACE_CONTEXT.collectionsById){var e=Static.SQUARESPACE_CONTEXT.collectionsById;
if(!e[d]._name||e[d]._name!=="Collection"){var b={};
for(var f in Static.SQUARESPACE_CONTEXT.collectionsById){var c=Static.SQUARESPACE_CONTEXT.collectionsById[f];
b[f]=new a.Squarespace.Collection(c)
}Static.SQUARESPACE_CONTEXT.collectionsById=b
}}},wrapNavigationData:function(){if(Static.SQUARESPACE_CONTEXT.templateCapabilities){if(Static.SQUARESPACE_CONTEXT.templateCapabilities.pageSchemas){for(var b in Static.SQUARESPACE_CONTEXT.templateCapabilities.pageSchemas){var e=new a.Squarespace.CollectionModel(Static.SQUARESPACE_CONTEXT.templateCapabilities.pageSchemas[b]);
e.setType(a.Squarespace.CollectionTypes.GENERIC);
e.setCollectionType(b);
a.Squarespace.CollectionModels[b]=e
}}if(Static.SQUARESPACE_CONTEXT.templateCapabilities.navigations){for(var g=0;
g<Static.SQUARESPACE_CONTEXT.templateCapabilities.navigations.length;
g++){Static.SQUARESPACE_CONTEXT.templateCapabilities.navigations[g]=new a.Squarespace.Navigation(Static.SQUARESPACE_CONTEXT.templateCapabilities.navigations[g]);
var c=a.clone(Static.SQUARESPACE_CONTEXT.templateCapabilities.navigations[g].getItems());
Static.SQUARESPACE_CONTEXT.templateCapabilities.navigations[g].data.navigationData.items=[];
for(var d=0;
d<c.length;
d++){var f=new a.Squarespace.NavigationItem(c[d]);
var h=f.getCollection();
if((h&&h.isSupported())||!h){Static.SQUARESPACE_CONTEXT.templateCapabilities.navigations[g].addItem(f)
}}a.Squarespace.Navigations.add(Static.SQUARESPACE_CONTEXT.templateCapabilities.navigations[g])
}}a.Squarespace.Navigations.getHidden()
}}});
a.Squarespace.Library._afterLibraryReady();
a.augment(a.Squarespace.Library,a.EventTarget)
},"1.0",{requires:["node","datatype-date","node-focusmanager","anim","dd","attribute","slider","json","squarespace-dombuilder","squarespace-util","squarespace-save-manager","squarespace-dialog-tagcloud","squarespace-debugger","squarespace-storage-lite"]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-commerce-utils",function(b){b.namespace("Squarespace.Commerce");
var a='<div class = "ac-product"><img src = "{thumbUrl}?format=100w" class = "thumbnail" alt = "Product thumbnail"><div class = "description">{highlighted}<br>{numVariants} variant{plural}<br></div></div>';
b.Squarespace.ACFormatters.product=function(d,c){return b.Array.map(c,function(e){return b.Lang.sub(a,{thumbUrl:e.raw.thumbUrl||"/universal/images-v6/configuration/no-image.png",highlighted:e.highlighted,numVariants:e.raw.product.variants.length,plural:e.raw.product.variants.length===0||e.raw.product.variants.length>1?"s":""})
})
};
b.Squarespace.Commerce={USPSServiceTypes:{FIRST_CLASS:1,PRIORITY:2,EXPRESS:3,PARCEL:4},getStoreCollections:function(){var c=[];
b.Object.each(b.Squarespace.Library.getCollections(),function(e,d,f){if(e.getTypeName()==="products"){c.push(e)
}});
return c
},normalizeAndCleanCouponData:function(e){if(e.discountType===b.Squarespace.CommerceDiscountTypes.FLAT){e.flatDiscount=e.discountAmt
}else{if(e.discountType===b.Squarespace.CommerceDiscountTypes.PERCENTAGE){e.percentDiscount=e.discountAmt
}}if(e.type==b.Squarespace.CommerceCouponTypes.CATEGORIES&&e.categorySelections){var c=b.clone(e.categorySelections);
var d=b.Squarespace.Commerce.getStoreCollections();
b.Array.each(e.categorySelections,function(j,g){var f=j.collectionId;
var h=false;
var k=false;
b.Array.each(d,function(m){if(m.getId()==f){h=true;
var i=m.getCategories();
var l=b.clone(j.categories);
b.Array.each(j.categories,function(o,n){if(i.indexOf(o)==-1){l.splice(l.indexOf(o),1)
}});
if(l.length===0){k=true
}b.Array.each(c,function(n){if(n.collectionId==f){n.categories=l
}})
}});
if(!h||k){c.splice(g,1)
}});
e.categorySelections=c
}return e
},getCouponSummary:function(d){var h,c;
var e=b.clone(d);
if(e.categorySelections){e.categorySelections=b.Lang.isArray(e.categorySelections)?e.categorySelections:JSON.parse(e.categorySelections)
}e=b.Squarespace.Commerce.normalizeAndCleanCouponData(e);
e.minPrice="$"+b.Squarespace.Utils.moneyFormat(d.minPrice);
e.productTitle=e.productTitle||"?";
switch(d.type){case b.Squarespace.CommerceCouponTypes.ALL_ORDERS:h="Save <strong>{discountAmt}</strong> on any order.";
c="<strong>Free shipping on any order.</strong>";
break;
case b.Squarespace.CommerceCouponTypes.ORDERS_OVER:h="Save <strong>{discountAmt}</strong> on any order over <strong>{minPrice}</strong>.";
c="<strong>Free shipping</strong> on any order over <strong>{minPrice}</strong>.";
break;
case b.Squarespace.CommerceCouponTypes.CATEGORIES:if(Static.IN_BACKEND){var f=e.categorySelections;
if(f&&f.length!=0){var g=b.Squarespace.Library.getCollections();
h='Save <strong>{discountAmt}</strong> on every item from:<ul class="category-list">';
b.Array.each(f,function(j){var i="<li><strong>"+g[j.collectionId].getTitle()+":</strong> ";
b.Array.each(j.categories,function(k){if(j.categories.indexOf(k)==j.categories.length-1){i+=k+"</li>"
}else{i+=k+", "
}});
h+=i
});
h+="</ul>"
}else{h="Save <strong>{discountAmt}</strong> on every item from: <div>No category selections.</div>"
}}else{h="Save <strong>{discountAmt}</strong> on select products."
}break;
case b.Squarespace.CommerceCouponTypes.SINGLE_PRODUCT:h="Save <strong>{discountAmt}</strong> on <strong>{productTitle}</strong>.";
break;
default:throw"Unsupported coupon type"
}switch(d.discountType){case b.Squarespace.CommerceDiscountTypes.FLAT:e.discountAmt="$"+b.Squarespace.Utils.moneyFormat(d.discountAmt);
break;
case b.Squarespace.CommerceDiscountTypes.PERCENTAGE:e.discountAmt=d.discountAmt+"%";
break;
case b.Squarespace.CommerceDiscountTypes.FREE_SHIPPING:return b.Lang.sub(c,e)
}return b.Lang.sub(h,e)
}}
},"1.0",{requires:["squarespace-autocomplete","squarespace-library"]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-commerce-analytics",function(b){var c=new b.Base.create("commerceTrack",b.Base,[],{itemViewed:function(j){this.fire("commerce-item-viewed",j)
},itemAdded:function(j){this.fire("commerce-item-added",j)
},itemRemoved:function(j){this.fire("commerce-item-removed",j)
},itemModified:function(j){this.fire("commerce-item-modified",j)
},checkoutStarted:function(j){this.fire("commerce-checkout-started",j)
},checkoutConfirmed:function(j){this.fire("commerce-checkout-confirmed",j)
}},{ATTRS:{}});
b.namespace("Squarespace").CommerceAnalytics=new c();
var a=b.Base.create("commerceAnalytics",b.Base,[],{initializer:function(){b.Squarespace.CommerceAnalytics.on("commerce-item-viewed",this._getProtectedTracker("onItemViewed"),this);
b.Squarespace.CommerceAnalytics.on("commerce-item-added",this._getProtectedTracker("onItemAdded"),this);
b.Squarespace.CommerceAnalytics.on("commerce-item-removed",this._getProtectedTracker("onItemRemoved"),this);
b.Squarespace.CommerceAnalytics.on("commerce-item-modified",this._getProtectedTracker("onItemModified"),this);
b.Squarespace.CommerceAnalytics.on("commerce-checkout-started",this._getProtectedTracker("onCheckoutStarted"),this);
b.Squarespace.CommerceAnalytics.on("commerce-checkout-confirmed",this._getProtectedTracker("onCheckoutConfirmed"),this);
this._setCartMode()
},_setCartMode:function(){var k=true;
try{k=Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.testModeOn
}catch(j){}this.cartMode=k?"test":"live"
},_getProtectedTracker:function(j){return function(l){try{this[j].call(this,l)
}catch(k){}}
},onItemViewed:function(j){},onItemAdded:function(j){},onItemRemoved:function(j){},onItemModified:function(j){},onCheckoutStarted:function(j){},onCheckoutConfirmed:function(j){}},{ATTRS:{}});
var d=b.Base.create("commerceAnalyticsInternal",a,[],{_createCartData:function(j){return{CartOrderId:j.id,CartSubtotal:j.subtotalCents/100,CartTax:j.taxCents/100,CartCurrency:"USD",CartMode:this.cartMode}
},_createProductData:function(j){return{ProductId:j.itemId,ProductName:j.title,ProductType:(j.productType===2)?"DIGITAL":"PHYSICAL",ProductSKU:(j.chosenVariant)?j.chosenVariant.sku:"",ProductPrice:j.purchasePriceCents/100,ProductQuantity:j.quantity}
},_getItemVariantPrice:function(j){var k;
if(b.Object.hasKey(j,"onSale")&&j.onSale){k=(b.Object.hasKey(j,"salePrice")?j.salePrice:j.salePriceCents)/100
}else{k=(b.Object.hasKey(j,"price")?j.price:j.priceCents)/100
}return k
},_getItemPrice:function(k){var j=0;
if(b.Object.hasKey(k,"variants")&&k.variants.length>0){b.Array.each(k.variants,function(l){j+=this._getItemVariantPrice(l)
},this);
j=j/k.variants.length
}else{j=this._getItemVariantPrice(k)
}return j
},_createItemData:function(j){return{ProductId:j.id,ProductName:j.title,ProductType:(j.productType===2)?"DIGITAL":"PHYSICAL",ProductPrice:this._getItemPrice(j),CartMode:this.cartMode}
},_createItemAddedData:function(j){return b.merge(this._createCartData(j.shoppingCart),this._createProductData(j.newlyAdded))
},_createItemRemovedData:function(j){return b.merge(this._createCartData(j.shoppingCart),this._createProductData(j.updatedEntry))
},_createItemModifiedData:function(j){return b.merge(this._createCartData(j.shoppingCart),this._createProductData(j.updatedEntry))
},_createItemCheckoutStartedData:function(j,k){return b.merge(this._createCartData(j),this._createProductData(k))
},_createItemCheckoutCompletedData:function(j,k){return b.merge(this._createCartData(j),this._createProductData(k))
},_track:function(j,k){b.Squarespace.Analytics.trackInternal(j,k)
},onItemViewed:function(j){this._track("shopper_product_viewed",this._createItemData(j))
}},{ATTRS:{}});
var i=b.Base.create("commerceAnalyticsMixpanel",d,[],{_track:function(j,k){b.Squarespace.Analytics.track(j,k)
},onItemViewed:function(j){this._track("shopper_product_viewed",this._createItemData(j))
},onItemAdded:function(j){this._track("shopper_product_added",this._createItemAddedData(j))
},onItemRemoved:function(j){this._track("shopper_product_removed",this._createItemRemovedData(j))
},onItemModified:function(j){this._track("shopper_product_modified",this._createItemModifiedData(j))
},onCheckoutStarted:function(j){b.each(j.entries,function(k){this._track("shopper_product_checkout_started",this._createItemCheckoutStartedData(j,k))
},this)
},onCheckoutConfirmed:function(j){b.each(j.purchasedCart.entries,function(k){this._track("shopper_product_purchased",this._createItemCheckoutCompletedData(j.purchasedCart,k))
},this);
this._track("shopper_order_submitted",{CartOrderId:j.purchasedCart.id,CartCurrency:"USD",CartGrandTotal:j.purchasedCart.grandTotalCents/100,CartSubtotal:j.purchasedCart.subtotalCents/100,CartTax:j.purchasedCart.taxCents/100,CartShipping:j.purchasedCart.shippingCostCents/100,CartTotalQuantity:j.purchasedCart.totalQuantity,CartMode:this.cartMode})
}},{ATTRS:{}});
var h=b.Base.create("commerceAnalyticsGoogle",a,[],{onCheckoutConfirmed:function(j){if(_gaq){_gaq.push(["_addTrans",j.id,"",j.purchasedCart.subtotalCents/100,j.purchasedCart.taxCents/100,j.purchasedCart.shippingCostCents/100,j.customer.billingAddress.city,j.customer.billingAddress.state,j.customer.billingAddress.country]);
b.each(j.purchasedCart.entries,function(k){_gaq.push(["_addItem",j.id,(k.chosenVariant)?k.chosenVariant.sku:"digital",k.title,"",k.purchasePriceCents/100,k.quantity])
});
_gaq.push(["_trackTrans"])
}}},{ATTRS:{}});
var g=new d();
var e=new i();
var f=new h();
if(b.Lang.isObject(Static)&&b.Object.hasKey(Static,"SQUARESPACE_CONTEXT")&&b.Object.hasKey(Static.SQUARESPACE_CONTEXT,"item")){if(Static.SQUARESPACE_CONTEXT.item.recordType===b.Squarespace.ContentConstants.STORE_ITEM){b.Squarespace.CommerceAnalytics.itemViewed(Static.SQUARESPACE_CONTEXT.item)
}}},"1.0",{requires:["event-custom","node","base","squarespace-util"]});/* Host: nyc-webster8.int.peer1.squarespace.net Request Version: 12232012020414 Local Version: 12232012020414 Served from: LOCAL */ 
YUI.add("squarespace-commerce",function(c){c.namespace("Squarespace");
var a=".cart",g=".qty",i=".price",b=".totalPrice",e=".tab",d=".totQty",h=".suffix",f=".checkout a";
c.Squarespace.Widgets.ShoppingCart=c.Base.create("shoppingCart",c.Squarespace.SSWidget,[],{_defaultConfig:{expressCheckout:false,useLightCart:false},initializer:function(j){this.config=c.merge(this._defaultConfig,j);
this._cart=this.config.shoppingCart;
this.plug(c.Plugin.WidgetAnim)
},renderUI:function(){c.Squarespace.Widgets.ShoppingCart.superclass.renderUI.call(this);
var j=this.get("boundingBox");
if(j.one(d)!==null){j.one(d).setContent("0")
}},bindUI:function(){c.Squarespace.Widgets.ShoppingCart.superclass.bindUI.call(this);
var j=this.get("contentBox"),k=j.one(".cart"),l=this.get("id");
this.on("cartChanged",this.updateCartTotals);
this.on("cartChanged",this.updateCheckoutHref)
},syncUI:function(){c.Squarespace.Widgets.ShoppingCart.superclass.syncUI.call(this);
if(this._cart.entries.length===0){this.get("boundingBox").hide()
}this._cart.entries.forEach(c.bind(function(j){if(j.quantity>0){this.appendEntry(j,false)
}},this));
this.fire("cartChanged")
},appendEntry:function(o,m){var l=this.get("contentBox"),p=l.one(".tbody"),j=c.zen(this.getProperty("ENTRY_PUT_TEMPLATE")),k=j.one(".item-image"),n=j.one(".item-desc");
var q;
if(this.config.linkItems){q=c.DB.A("item-link",{href:Static.SQUARESPACE_CONTEXT.website.authenticUrl+o.item.fullUrl},o.item.title)
}else{q=c.DB.SPAN("item-link",o.item.title)
}j.one(".qty").setAttribute("maxlength",4).setAttribute("value",o.quantity);
j.one(".price").setContent("$"+c.Squarespace.Utils.moneyFormat(o.quantity*o.purchasePriceCents));
k.append(c.DB.IMG("",{src:"/item/"+o.item.id+"?format=100w"}));
n.append(q);
if(!!o.chosenVariant){n.append(c.DB.DIV("variant-info",c.Squarespace.Utils.variantFormat(o.chosenVariant)))
}j.setAttribute("data-item-id",o.item.id);
if(o.chosenVariant!==undefined){j.setAttribute("data-chosen-variant-sku",o.chosenVariant.sku)
}j.one(g).on("keyup",c.bind(function(r){var s=j.one(g).get("value");
if(!c.Lang.isNumber(Number(s))||s===""){r.preventDefault();
return
}if(c.Lang.isNumber(Number(s))&&Number(s)>=0){this._updateCartQuantities(o,s)
}else{j.one(g).set("value",1);
this._updateCartQuantities(o,1)
}},this));
if(o.item.productType===c.Squarespace.ProductTypes.DIGITAL){j.one(g).setAttribute("readonly","readonly").addClass("readonly")
}j.on("closed",j.remove);
j.one(".remove-item").on("click",c.bind(function(){this.removeItem(o,j)
},this));
j.hide();
if(m){j.plug(c.Squarespace.Animations.Expandable,{duration:0.25});
j.setStyle("opacity",0);
p.append(j);
j.show();
j.on("opened",function(){c.later(350,this,function(){j.unplug(c.Squarespace.Animations.Expandable);
j.plug(c.Squarespace.Animations.Fadeable,{duration:0.25});
j.show()
})
})
}else{j.show();
p.append(j)
}this.fire("cartChanged")
},isExpanded:function(){var j=this.get("contentBox").one(a);
if((j.get("offsetWidth")===0&&j.get("offsetHeight")===0)||j.get("display")==="none"){return false
}else{return true
}},getExistingEntry:function(n,l){var k=this.get("contentBox"),m=k.one(".tbody");
var j=(!!l)?l.sku:null;
if(!!j){return m.one('.row[data-item-id="'+n+'"][data-chosen-variant-sku="'+j+'"]')
}else{return m.one('.row[data-item-id="'+n+'"]')
}},getShippingOptions:function(){return this._cart.shippingOptions
},removeItem:function(k,j){j.unplug(c.Squarespace.Animations.Fadeable);
j.plug(c.Squarespace.Animations.Expandable,{duration:0.25});
j.plug(c.Squarespace.Animations.Fadeable,{duration:0.25});
j.once("closed",c.bind(function(){this._updateCartQuantities(k,0)
},this));
j.hide()
},_updateCartQuantities:function(m,k){var l=m.item;
var j=this.getExistingEntry(l.id,m.chosenVariant);
var n={items:[{itemId:l.id,chosenVariantSku:(!!m.chosenVariant)?m.chosenVariant.sku:null,quantity:k}]};
c.Data.post({url:"/api/open/UpdateCart",data:{updatedQuantities:JSON.stringify(n)},success:c.bind(function(p){if(p.success===false){if(p.notFound){this.showError("That item has been deleted.");
this._cart=p.shoppingCart;
this.fire("cartChanged");
return
}else{this.showError(p.message);
j.one(g).set("value",p.qtyInStock);
this._updateCartQuantities(m,p.qtyInStock);
return
}}if(k===0){c.Squarespace.CommerceAnalytics.itemRemoved(p)
}else{c.Squarespace.CommerceAnalytics.itemModified(p)
}this._cart=p.shoppingCart;
var o=p.updatedEntry;
var q=o.quantity*o.purchasePriceCents;
if(j!==null){var r=j.one(i);
r.setContent("$"+c.Squarespace.Utils.moneyFormat(q))
}this.fire("cartChanged")
},this)})
},updateCheckoutHref:function(){var j=this.get("contentBox");
if(j.one(f)){j.one(f).set("href",this._getCheckoutHref())
}},gotoCheckout:function(){window.location=this._getCheckoutHref()
},_getCheckoutHref:function(){return"https://secure."+Static.SQUARESPACE_CONTEXT.appDomain+"/checkout?cartId="+c.Cookie.get("CART")
},updateCartTotals:function(){var q=this.get("contentBox"),o=q.one(a),j=o.one(".tbody"),s=o.one(".subtotal").one(".price"),p=o.one(".total").one(".price"),l=o.one(".shipping").one(".price"),r=o.one(".tax").one(".price"),m=o.one(".discounts"),n=o.one(".discounts").one(".price");
var k=this.getTotals();
q.one(d).setContent((k.superQty>100)?"100+":k.superQty);
q.one(h).setContent((k.superQty!=1)?"items":"item");
s.setContent("$"+c.Squarespace.Utils.moneyFormat(k.subtotalCents));
p.setContent("$"+c.Squarespace.Utils.moneyFormat(k.grandTotalCents));
l.setContent("$"+c.Squarespace.Utils.moneyFormat(this._cart.shippingCostCents));
r.setContent("$"+c.Squarespace.Utils.moneyFormat(this._cart.taxCents));
n.setContent("- $"+c.Squarespace.Utils.moneyFormat(this._cart.discountCents));
if(this._cart.discountCents===0){m.hide()
}else{m.show()
}if(k.superQty===0){this._showEmptyMsg()
}else{this._hideEmptyMsg()
}if(k.superQty===0){q.one(".checkout").hide()
}else{q.one(".checkout").show()
}},_showEmptyMsg:function(){var j=this.get("contentBox"),l=j.one(a),k=l.one(".tbody");
k.empty();
k.append("<div class='empty-cart-msg'>You have no items in your cart.</div>")
},_hideEmptyMsg:function(){var j=this.get("contentBox"),l=j.one(a),k=l.one(".tbody");
if(k.one(".empty-cart-msg")){k.one(".empty-cart-msg").remove()
}},updateShippingChoice:function(j){c.Data.post({url:"/api/open/UpdateCart",data:{chosenShippingOption:j},success:c.bind(function(k){this._cart=k.shoppingCart;
this.fire("cartChanged")
},this)})
},updateState:function(j){c.Data.post({url:"/api/open/UpdateCart",data:{chosenShippingState:j},success:c.bind(function(k){this._cart=k.shoppingCart;
this.fire("cartChanged")
},this)})
},updateShippingZip:function(j){c.Data.post({url:"/api/open/UpdateCart",data:{chosenShippingZip:j},success:c.bind(function(k){this._cart=k.shoppingCart;
this.fire("cartChanged")
},this)})
},isPurelyDigital:function(){return this._cart.purelyDigital
},getTotals:function(){var j={superQty:0,subtotalCents:0,grandTotalCents:0};
this._cart.entries.forEach(function(k){j.superQty+=k.quantity
});
j.subtotalCents=this._cart.subtotalCents;
j.grandTotalCents=this._cart.grandTotalCents;
return j
},isEmpty:function(){return this.getTotals().superQty===0
},showError:function(j){new c.Squarespace.Widgets.ResponsiveAlert({}).show("Unable to Add Item",j)
},addItem:function(o,l,m,n){var k=(!!l)?l.sku:null;
var j;
if(!c.Lang.isNull(m)&&!c.Lang.isUndefined(m)){if(!c.Lang.isNumber(m)){this.showError("Payment price invalid.");
n();
return
}j=Math.round((m*100)*100/100);
if(j>999999900){this.showError("Payment price exceeds system maximum of $9,999,999.");
n();
return
}}c.Data.post({url:"/api/open/AddToCart",data:{itemId:o,variantSku:k,payWhatYouWantPrice:j},success:c.bind(function(p){if(p.success===false){this.showError(p.reason);
if(n){n()
}return
}c.Squarespace.CommerceAnalytics.itemAdded(p);
this._cart=p.shoppingCart;
if(this.config.expressCheckout){this.gotoCheckout()
}else{this._addItemComplete(o,l,p,n)
}},this)})
},_addItemComplete:function(p,k,j,n){if(this.getExistingEntry(p,k)){var l=this.getExistingEntry(p,k),m=l.one(g),o=l.one(i);
m.plug(c.Squarespace.Animations.Fadeable,{onlyUseOpacity:true});
m.once("hidden",c.bind(function(){m.setAttribute("value",j.newlyAdded.quantity);
o.setContent("$"+c.Squarespace.Utils.moneyFormat(j.newlyAdded.quantity*j.newlyAdded.purchasePriceCents));
m.show();
this.fire("cartChanged")
},this));
m.hide(false,true)
}else{this.appendEntry(j.newlyAdded,true)
}if(n){n()
}}},{CSS_PREFIX:"sqs-shopping-cart",HANDLEBARS_TEMPLATE:"shopping-cart.html",ENTRY_PUT_TEMPLATE:"tr.row>td.item>div.item-image><+td.item-desc>+td.quantity>input.qty><+td.price>+td.remove>div.remove-item><<",ATTRS:{strings:{value:{tab:"Cart",checkoutText:" Proceed to Checkout"}}}});
c.Squarespace.Widgets.FullPageShoppingCart=c.Base.create("fullPageShoppingCart",c.Squarespace.Widgets.ShoppingCart,[],{bindUI:function(){c.Squarespace.Widgets.FullPageShoppingCart.superclass.bindUI.call(this);
var j=this.get("contentBox");
j.one(".checkout-button").on("click",function(){window.location=this._getCheckoutHref()
},this)
},_showEmptyMsg:function(){var j=this.get("contentBox");
j.one(a).hide();
if(j.one(".empty-cart-msg")==null){j.append(c.DB.DIV("empty-cart-msg","You have nothing in your shopping cart.&nbsp;",c.DB.A("",{href:"/",html:"Continue Shopping"})))
}},_hideEmptyMsg:function(){var j=this.get("contentBox");
j.one(a).show();
if(j.one(".empty-cart-msg")){j.one(".empty-cart-msg").hide()
}}},{CSS_PREFIX:"sqs-fullpage-shopping-cart",HANDLEBARS_TEMPLATE:"shopping-cart.html",ATTRS:{strings:{value:{checkoutText:"CHECKOUT"}}}});
c.Squarespace.Widgets.FixedShoppingCart=c.Base.create("fixedShoppingCart",c.Squarespace.Widgets.ShoppingCart,[],{bindUI:function(){c.Squarespace.Widgets.FixedShoppingCart.superclass.bindUI.call(this);
var j=this.get("contentBox"),k=j.one(a),l=this.get("id");
k.plug(c.Squarespace.Animations.Expandable,{duration:0.25});
k.hide(true);
j.one(e).on(l+"|click",this._toggleShowCart,this)
},close:function(){this.get("contentBox").one(a).hide();
c.Squarespace.EscManager.removeTarget(this)
},_toggleShowCart:function(){this.fire("cartChanged");
var j=this.get("contentBox").one(a);
if(j.get("offsetHeight")>0){j.hide()
}else{this._showCart()
}},_showCart:function(j){var k=this.get("contentBox").one(a);
this.get("boundingBox").show();
k.once("opened",c.bind(function(){if(j!==undefined){c.later(200,this,j)
}},this));
if(k.get("offsetHeight")===0){k.show()
}else{j()
}c.Squarespace.EscManager.addTarget(this)
},_addItemComplete:function(m,k,j,l){this._showCart(c.bind(function(){if(this.getExistingEntry(m,k)){var n=this.getExistingEntry(m,k),o=n.one(g),p=n.one(i);
o.plug(c.Squarespace.Animations.Fadeable,{onlyUseOpacity:true});
o.once("hidden",c.bind(function(){o.setAttribute("value",j.newlyAdded.quantity);
p.setContent("$"+c.Squarespace.Utils.moneyFormat(j.newlyAdded.quantity*j.newlyAdded.purchasePriceCents));
o.show();
this.fire("cartChanged")
},this));
o.hide(false,true)
}else{this.appendEntry(j.newlyAdded,true)
}if(l){l()
}},this))
}},{CSS_PREFIX:"sqs-fixed-shopping-cart",ATTRS:{strings:{value:{checkoutText:"Cart"}}},HANDLEBARS_TEMPLATE:"fixed-shopping-cart.html",ENTRY_PUT_TEMPLATE:"div.row>div.item>div.item-image>+div.item-desc><+div.remove>div.remove-item><<div.price>+input.qty><"});
c.Squarespace.Widgets.PillShoppingCart=c.Base.create("pillShoppingCart",c.Squarespace.Widgets.FixedShoppingCart,[],{initializer:function(j){c.Squarespace.Widgets.PillShoppingCart.superclass.initializer.call(this,j)
},renderUI:function(){c.Squarespace.Widgets.FixedShoppingCart.superclass.renderUI.call(this);
var j=this.get("boundingBox");
if(this.config.useLightCart){j.addClass("light")
}else{j.addClass("dark")
}if(j.one(d)!==null){j.one(d).setContent("0")
}},bindUI:function(){c.Squarespace.Widgets.FixedShoppingCart.superclass.bindUI.call(this);
var j=this.get("contentBox"),k=j.one(a);
this.on("cartChanged",this.updateCartTotals);
this.on("cartChanged",this.updateCheckoutHref);
this.get("contentBox").on("click",function(){window.location=this._getCartPageUrl()
},this)
},syncUI:function(){c.Squarespace.Widgets.FixedShoppingCart.superclass.syncUI.call(this);
var j=this.get("boundingBox"),k=j.one(a);
k.plug(c.Squarespace.Animations.Scalable,{duration:0.25});
k.hide(true);
if(this._cart.entries.length===0){k.hide()
}else{this._showCart()
}if(this.config.expressCheckout){j.hide()
}this.fire("cartChanged")
},_showCart:function(j){var l=this.get("contentBox").one(a);
if(l.get("offsetHeight")===0||l.getStyle("visibility")=="hidden"||l.getStyle("display")=="none"||l.getStyle("opacity")==0){this.get("boundingBox").show();
l.show()
}else{var m=new c.Anim({node:l,to:{opacity:0.7},duration:0.2,easing:c.Easing.easeOutStrong});
var k=new c.Anim({node:l,to:{opacity:1},duration:0.5,easing:c.Easing.easeOutStrong});
m.on("end",function(){k.run()
});
m.run()
}if(j!==undefined){j()
}},_getCartPageUrl:function(){var j="/show-cart?cartId="+c.Cookie.get("CART");
return j
}},{CSS_PREFIX:"sqs-pill-shopping-cart",ATTRS:{strings:{value:{checkoutText:"Cart"}}},HANDLEBARS_TEMPLATE:"pill-shopping-cart.html"})
},"1.0",{requires:["base","base-build","widget-parent","widget-anim","squarespace-animations","squarespace-localities","squarespace-ss-widget","node","json","squarespace-ui-base","squarespace-util","squarespace-dombuilder","squarespace-list","squarespace-commerce-css","squarespace-coupon-list-template","squarespace-shopping-cart-template","squarespace-fixed-shopping-cart-template","squarespace-pill-shopping-cart-template","squarespace-responsive-confirmation-dialog","squarespace-commerce-utils","squarespace-ui-templates","squarespace-commerce-analytics"]});